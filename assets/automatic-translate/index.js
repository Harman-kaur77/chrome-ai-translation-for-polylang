(()=>{"use strict";var t={338:(t,e,a)=>{var n=a(795);e.createRoot=n.createRoot,e.hydrateRoot=n.hydrateRoot},795:t=>{t.exports=window.ReactDOM}},e={};function a(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,a),r.exports}a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};a.r(n),a.d(n,{allowedMetaFields:()=>te,contentFetchStatus:()=>ee,contentSaveSource:()=>Qt,contentSaveTranslate:()=>Yt,excerptSaveSource:()=>Vt,excerptSaveTranslate:()=>Gt,metaFieldsSaveSource:()=>Jt,metaFieldsSaveTranslate:()=>Zt,setBlockRules:()=>Kt,titleSaveSource:()=>Wt,titleSaveTranslate:()=>qt,translationInfo:()=>Xt});var o={};a.r(o),a.d(o,{contentFetchStatus:()=>le,getAllowedMetaFields:()=>se,getBlockRules:()=>ne,getTranslatedString:()=>oe,getTranslationEntry:()=>ae,getTranslationInfo:()=>re});var r=a(338);const s=window.wp.element,l=window.wp.data,c=window.wp.i18n,i=t=>React.createElement("div",{className:"modal-header",key:t.modalRender},React.createElement("span",{className:"close",onClick:()=>{t.setPopupVisibility(!1)}},"Ã—"),React.createElement("h2",{className:"notranslate"},(0,c.__)("Step 2 - Start Automatic Translation Process","chrome-ai-translation-for-polylang")),React.createElement("div",{className:"save_btn_cont"},React.createElement("button",{className:"notranslate save_it button button-primary",disabled:t.translatePendingStatus,onClick:t.updatePostData},t.translateButtonStatus?React.createElement(React.Fragment,null,React.createElement("span",{className:"updating-text"},(0,c.__)("Updating","chrome-ai-translation-for-polylang"),React.createElement("span",{className:"dot",style:{"--i":0}}),React.createElement("span",{className:"dot",style:{"--i":1}}),React.createElement("span",{className:"dot",style:{"--i":2}}))):(0,c.__)("Update Content","chrome-ai-translation-for-polylang")))),d=window.React,p=t=>{const e=t.skipTags||[],a="#catfp_open_translate_span#",n="#catfp_close_translate_span#",o="#catfp_temp_tag_open#",r="#catfp_temp_tag_close#",s="#catfp_less_then_symbol#",l="#catfp_greater_then_symbol#",c="#catfp_entity_open_translate_span#",i="#catfp_entity_close_translate_span#",d=t=>t.replace(new RegExp(a,"g"),"").replace(new RegExp(n,"g"),""),p=t=>{const o=document.createElement("div");o.innerHTML=t;const r=o.firstElementChild;if(!r)return t;let s=r.childNodes,l=s.length;if(l>0){s=Array.from(s).sort((t,e)=>3===t.nodeType?-1:3===e.nodeType?1:0);for(let t=0;t<l;t++){let e=s[t];if(3===e.nodeType){let t=e.textContent.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$/g,t=>`${a}${d(t)}${n}`);e.textContent=t}else if(8===e.nodeType)e.textContent=e.textContent;else{let t=p(e.outerHTML);e.outerHTML=t}}}let c=r.outerHTML.match(/^<[^>]+>/)[0];const i=new RegExp(`${a}|${n}`,"g");c=c.replace(i,"");const u=r.tagName.toLowerCase(),g=new RegExp(`</${u}>`,"i"),f=r.outerHTML.match(g);if("<style>"===c)return`${a}${d(r.outerHTML)}${n}`;let m=r.innerHTML;m=m.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$/g,t=>`${a}${d(t)}${n}`),r.innerHTML="";let h="",y="",_="";if(y=`${a}${d(c)}${n}`,f&&(h=`${a}</${u}>${n}`),e.includes(u)){const t=new RegExp(`${a}|${n}`,"g");m=m.replace(t,""),m=`${a}${d(m)}${n}`}return""!==m?(""!==y&&(_=y+m),""!==h&&(_+=h)):_=y+h,r.outerHTML=_,o.innerHTML},u=["localAiTranslator"].includes(t.service)?(e=>{/^(_yoast_wpseo_|rank_math_|_seopress_)/.test(t.contentKey.trim())&&(e=(t=>t.replace(/(%{1,2}[a-zA-Z0-9_]+%{0,2})/g,t=>`${a}${d(t)}${n}`))(e));const u=/\[(.*?)\]/g;"string"==typeof e&&e.match(u)&&(e=e.replace(u,t=>`${a}${d(t)}${n}`));let g=e;if((t=>(t=t.trim(),/^<([a-z][a-z0-9]*)\b[^>]*>(\s*(?:<!--.*?-->\s*)*<\/\1>)?$/i.test(t)))(e))g=e.replace(/<([a-z][a-z0-9]*)\b[^>]*>(\s*(?:<!--.*?-->\s*)*<\/\1>)?/gi,t=>`${a}${d(t)}${n}`);else{const t=document.createElement("div");t.innerHTML=(t=>{if("string"!=typeof t||!t.trim())return t;const e=/<\/?([a-zA-Z0-9]+)(\s[^>]*)?>/g,a=[];let n,s="",l=0;for(;null!==(n=e.exec(t));){const[c,i]=n,d=c.startsWith("</"),p=n.index;if(p>l&&(s+=t.slice(l,p)),d){const t=a.findIndex(t=>t.tag===i);-1!==t?(a.splice(t,1),s+=c):s+=`${o}<${i}>${r}`+c}else a.push({tag:i}),s+=c;l=e.lastIndex}l<t.length&&(s+=t.slice(l));for(let t=a.length-1;t>=0;t--){const{tag:e}=a[t];s+=`${o}</${e}>${r}`}return n=null,a.length=0,t=null,s})(e),function t(e){let o=e.childNodes;const r=e=>{if(o.length>e){let u=o[e],g=null;if(3===u.nodeType){const t=u.textContent.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$/g,t=>`${a}${d(t)}${n}`);g=document.createTextNode(t)}else if(8===u.nodeType)g=document.createTextNode(`${a}${s}!--${d(u.textContent)}--${l}${n}`);else if(1===u.nodeType){const e=u.childNodes,o=u.outerHTML.trim(),r=o.match(/^<([a-zA-Z0-9]+)(\s[^>]*)?>/i);if(!r)return o;const p=r[1],f=r[2]||"",m=new RegExp(`<\\/${p}>\\s*$`,"i").test(o);e.length>0&&t(u);let h=`${a}${s}${p}${d(f)}${l}${n}${(t=>t.replace(/&([a-zA-Z0-9#x]+);/g,t=>`${c}${t.replace(/&/g,"").replace(/;/g,"")}${i}`))(u.innerHTML)}`;m&&(h+=`${a}${s}/${p}${l}${n}`),g=document.createTextNode(h)}else{let t=u.outerHTML;t=t.replace(/<!--([\s\S]*?)-->/g,(t,e)=>`${a}${d(t)}${n}`);let e=p(t);g=document.createTextNode(e)}u.replaceWith(g),e++,r(e)}};return r(0),e}(t),g=t.innerText,g=g.replace(new RegExp(s,"g"),"<").replace(new RegExp(l,"g"),">"),g=((t,e)=>{if(t=t.trim(),!/<\/?(tr|td)\b[^>]*>/i.test(t))return e;if(/<\/?(tr|td)\b[^>]*>/i.test(e))return e;e=e.trim();const o=t.match(/^<(tr|td)\b[^>]*>/i),r=t.match(/<\/(tr|td)>\s*$/i);let s=e;return o&&(s=`${a}${d(o[0])}${n}`+s),r&&(s+=`${a}${d(r[0])}${n}`),s})(e,g)}const f=new RegExp(`${o}([\\s\\S]*?)(${r})`,"g");return g=g.replace(f,""),g=(t=>t.replace(new RegExp(c,"g"),"&").replace(new RegExp(i,"g"),";"))(g),(t=>{const e=new RegExp(`(${a}[\\s\\S]*?${n})|'`);return t.split(e).filter(Boolean).filter(t=>""!==t.trim())})(g)})(t.content):t.content,g=new RegExp(`${a}[\\s\\S]*?${n}`),f=new RegExp(`${a}|${n}`,"g");return React.createElement(React.Fragment,null,["localAiTranslator"].includes(t.service)?u.map((t,e)=>g.test(t)?React.createElement("span",{key:e,className:"notranslate catfp-notraslate-tag",translate:"no"},(t=>t.replace(f,""))(t)):t):u)};class u{static Object=t=>new this(t).extraData();constructor(t){this.btnSelector=t.btnSelector||!1,this.btnClass=t.btnClass||!1,this.btnText=t.btnText||`Translate To ${t.targetLanguageLabel} (Beta)`,this.stringSelector=t.stringSelector||!1,this.progressBarSelector=t.progressBarSelector||!1,this.onStartTranslationProcess=t.onStartTranslationProcess||(()=>{}),this.onComplete=t.onComplete||(()=>{}),this.onLanguageError=t.onLanguageError||(()=>{}),this.onBeforeTranslate=t.onBeforeTranslate||(()=>{}),this.onAfterTranslate=t.onAfterTranslate||(()=>{}),this.sourceLanguage=t.sourceLanguage||"en",this.targetLanguage=t.targetLanguage||"hi",this.targetLanguageLabel=t.targetLanguageLabel||"Hindi",this.sourceLanguageLabel=t.sourceLanguageLabel||"English"}extraData=async()=>{const t=await u.languageSupportedStatus(this.sourceLanguage,this.targetLanguage,this.targetLanguageLabel,this.sourceLanguageLabel);return!0!==t?(this.onLanguageError(t),{}):(this.defaultLang=this.targetLanguage,{continueTranslation:this.continueTranslation,stopTranslation:this.stopTranslation,startTranslation:this.startTranslation,reInit:this.reInit,init:this.init})};static languageSupportedStatus=async(t,e,a,n)=>{const o=["en","es","ja","ar","de","bn","fr","hi","it","ko","nl","pl","pt","ru","th","tr","vi","zh","zh-hant","bg","cs","da","el","fi","hr","hu","id","iw","lt","no","ro","sk","sl","sv","uk","kn","ta","te","mr"].map(t=>t.toLowerCase()),r="https:"===window.location.protocol,s=window?.isSecureContext;if(!window.hasOwnProperty("chrome")||!navigator.userAgent.includes("Chrome")||navigator.userAgent.includes("Edg"))return jQuery('<span style="color: #ff4646; display: inline-block;">\n                <strong>Important Notice:</strong>\n                <ol>\n                    <li>The Translator API, which leverages Chrome local AI models, is designed specifically for use with the Chrome browser.</li>\n                    <li>For comprehensive information about the Translator API, <a href="https://developer.chrome.com/docs/ai/translator-api" target="_blank">click here</a>.</li>\n                </ol>\n                <p>Please ensure you are using the Chrome browser for optimal performance and compatibility.</p>\n            </span>');if(!("translation"in self&&"createTranslator"in self.translation||"ai"in self&&"translator"in self.ai||"Translator"in self&&"create"in self.Translator||r||s))return jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <strong>Important Notice:</strong>\n                <ol>\n                    <li>\n                        The Translator API is not functioning due to an insecure connection.\n                    </li>\n                    <li>\n                        Please switch to a secure connection (HTTPS) or add this URL to the list of insecure origins treated as secure by visiting \n                        <span data-clipboard-text="chrome://flags/#unsafely-treat-insecure-origin-as-secure" target="_blank" class="chrome-ai-translator-flags">\n                            chrome://flags/#unsafely-treat-insecure-origin-as-secure ${u.svgIcons("copy")}\n                        </span>.\n                        Click on the URL to copy it, then open a new window and paste this URL to access the settings.\n                    </li>\n                </ol>\n            </span>`);if(!("translation"in self&&"createTranslator"in self.translation||"ai"in self&&"translator"in self.ai||"Translator"in self&&"create"in self.Translator))return jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <h4>Steps to Enable the Translator AI Modal:</h4>\n                <ol>\n                    <li>Open this URL in a new Chrome tab: <strong><span data-clipboard-text="chrome://flags/#translation-api" target="_blank" class="chrome-ai-translator-flags">chrome://flags/#translation-api ${u.svgIcons("copy")}</span></strong>. Click on the URL to copy it, then open a new window and paste this URL to access the settings.</li>\n                    <li>Ensure that the <strong>Experimental translation API</strong> option is set to <strong>Enabled</strong>.</li>\n                    <li>Click on the <strong>Save</strong> button to apply the changes.</li>\n                    <li>The Translator AI modal should now be enabled and ready for use.</li>\n                </ol>\n                <p>For more information, please refer to the <a href="https://developer.chrome.com/docs/ai/translator-api" target="_blank">documentation</a>.</p>   \n                <p>If the issue persists, please ensure that your browser is up to date and restart your browser.</p>\n            </span>`);if(!o.includes(e.toLowerCase()))return jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <strong>Language Support Information:</strong>\n                <ol>\n                    <li>The current version of Chrome AI Translator does not support the Target Language <strong>${a} (${e})</strong></li>\n                    <li>To view the list of supported languages, please <span data-clipboard-text="chrome://on-device-translation-internals" target="_blank" class="chrome-ai-translator-flags">chrome://on-device-translation-internals ${u.svgIcons("copy")}</span>. Click on the URL to copy it, then open a new window and paste this URL to access the settings.</li>\n                    <li>Ensure your Chrome browser is updated to the latest version for optimal performance.</li>\n                </ol>\n            </span>`);if(!o.includes(t.toLowerCase()))return jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <strong>Language Support Information:</strong>\n                <ol>\n                    <li>The current version of Chrome AI Translator does not support the Source Language <strong>${n} (${t})</strong></li>\n                    <li>To view the list of supported languages, please <span data-clipboard-text="chrome://on-device-translation-internals" target="_blank" class="chrome-ai-translator-flags">chrome://on-device-translation-internals ${u.svgIcons("copy")}</span>. Click on the URL to copy it, then open a new window and paste this URL to access the settings.</li>\n                    <li>Ensure your Chrome browser is updated to the latest version for optimal performance.</li>\n                </ol>\n            </span>`);const l=await u.languagePairAvality(t,e);return"after-download"===l||"downloadable"===l||"unavailable"===l?jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <h4>Installation Instructions for Language Packs:</h4>\n                <ol>\n                    <li>\n                        To proceed, please install the language pack for <strong>${a} (${e})</strong> or <strong>${n} (${t})</strong>.\n                    </li>\n                    <li>\n                        After installing the language pack, add this language to your browser's system languages in Chrome settings.<br>\n                        Go to <strong>Settings &gt; Languages &gt; Add languages</strong> and add <strong>${a}</strong> or <strong>${n}</strong> to your preferred languages list & reload the page.\n                    </li>\n                    <li>\n                        You can install it by visiting the following link: \n                        <strong>\n                            <span data-clipboard-text="chrome://on-device-translation-internals" target="_blank" class="chrome-ai-translator-flags">\n                                chrome://on-device-translation-internals ${u.svgIcons("copy")}\n                            </span>\n                        </strong>. Click on the URL to copy it, then open a new window and paste this URL to access the settings.\n                    </li>\n                    <li>\n                        Please check if both your source <strong>(<span style="color:#2271b1">${t}</span>)</strong> and target <strong>(<span style="color:#2271b1">${e}</span>)</strong> languages are available in the language packs list.\n                    </li>\n                    <li>\n                        You need to install both language packs for translation to work. You can search for each language by its language code: <strong>${t}</strong> and <strong>${e}</strong>.\n                    </li>\n                    <li>For more help, refer to the <a href="https://developer.chrome.com/docs/ai/translator-api#supported-languages" target="_blank">documentation to check supported languages</a>.</li>\n                </ol>\n            </span>`):"downloading"===l?jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <h4>Language Pack Download In Progress:</h4>\n                <ol>\n                    <li>\n                        The language pack for <strong>${a} (${e})</strong> or <strong>${n} (${t})</strong> is already being downloaded.\n                    </li>\n                    <li>\n                        <strong>You do not need to start the download again.</strong> Please wait for the download to complete. Once finished, the translation feature will become available automatically.\n                    </li>\n                    <li>\n                        You can check the download progress by opening:\n                        <strong>\n                            <span data-clipboard-text="chrome://on-device-translation-internals" target="_blank" class="chrome-ai-translator-flags">\n                                chrome://on-device-translation-internals ${u.svgIcons("copy")}\n                            </span>\n                        </strong>\n                        . Click on the URL to copy it, then open a new window and paste this URL in Chrome to view the status.\n                    </li>\n                    <li>\n                        <strong>What to do next:</strong>\n                        <ul style="margin-top: .5em;">\n                            <li>Wait for the download to finish. The status will change to <strong>Ready</strong> or <strong>Installed</strong> in the <strong>Language Packs</strong> section.</li>\n                            <li>After the language pack is installed, you may need to <strong>reload</strong> or <strong>restart</strong> your browser for the changes to take effect.</li>\n                        </ul>\n                    </li>\n                    <li>\n                        For more help, refer to the <a href="https://developer.chrome.com/docs/ai/translator-api#supported-languages" target="_blank">documentation to check supported languages</a>.\n                    </li>\n                </ol>\n                <div style="text-align: right;">\n                    <button onclick="location.reload()" class="catfp-error-reload-btn">Reload Page</button>\n                </div>\n            </span>`):"readily"===l||"available"===l||jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <h4>Language Pack Installation Required</h4>\n                <ol>\n                    <li>Please ensure that the language pack for <strong>${a} (${e})</strong> or <strong>${n} (${t})</strong> is installed and set as a preferred language in your browser.</li>\n                    <li>To install the language pack, visit <strong><span data-clipboard-text="chrome://on-device-translation-internals" target="_blank" class="chrome-ai-translator-flags">chrome://on-device-translation-internals ${u.svgIcons("copy")}</span></strong>. Click on the URL to copy it, then open a new window and paste this URL to access the settings.</li>\n                    <li>If you encounter any issues, please refer to the <a href="https://developer.chrome.com/docs/ai/translator-api#supported-languages" target="_blank">documentation to check supported languages</a> for further assistance.</li>\n                </ol>\n            </span>`)};static languagePairAvality=async(t,e)=>{let a=!1;if("translation"in self&&"createTranslator"in self.translation)a=await self.translation.canTranslate({sourceLanguage:t,targetLanguage:e});else if("ai"in self&&"translator"in self.ai){const n=await self.ai.translator.capabilities();a=await n.languagePairAvailable(t,e)}else"Translator"in self&&"create"in self.Translator&&(a=await self.Translator.availability({sourceLanguage:t,targetLanguage:e}));if((!a||["unavailable","downloading","after-download","downloadable"].includes(a))&&window?.self?.Translator)try{await self.Translator.create({sourceLanguage:t,targetLanguage:e,monitor(t){t.addEventListener("downloadprogress",t=>{console.log(`Downloaded ${100*t.loaded}%`)})}}),a=await(window?.self?.Translator?.availability({sourceLanguage:t,targetLanguage:e}))}catch(t){console.log("err",t)}return a};AITranslator=async t=>"translation"in self&&"createTranslator"in self.translation?await self.translation.createTranslator({sourceLanguage:this.sourceLanguage,targetLanguage:t}):"ai"in self&&"translator"in self.ai?await self.ai.translator.create({sourceLanguage:this.sourceLanguage,targetLanguage:t}):"Translator"in self&&"create"in self.Translator&&await self.Translator.create({sourceLanguage:this.sourceLanguage,targetLanguage:t});init=async()=>{this.appendBtn(),this.translationStart=!1,this.completedTranslateIndex=0,this.completedCharacterCount=0,this.translateBtnEvents(),this.progressBarSelector&&this.addProgressBar()};appendBtn=()=>{this.translateBtn=jQuery(`<button class="button button-primary${this.btnClass?" "+this.btnClass:""}">${this.btnText}</button>`),jQuery(this.btnSelector).append(this.translateBtn)};formatCharacterCount=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t;translateBtnEvents=t=>this.btnSelector&&0!==jQuery(this.btnSelector).length?this.stringSelector&&0!==jQuery(this.stringSelector).length?(this.translateStatus=!0,this.translateBtn.off("click"),this.translateBtn.prop("disabled",!1),void(this.translationStart?this.translateStringEle.length>this.completedTranslateIndex+1?this.translateBtn.on("click",()=>{this.onStartTranslationProcess(),this.stringTranslation(this.completedTranslateIndex+1)}):(this.onComplete({translatedStringsCount:this.completedCharacterCount}),this.translateBtn.prop("disabled",!0)):this.translateBtn.on("click",this.startTranslationProcess))):this.onLanguageError("The string selector is missing. Please provide a valid selector for the strings to be translated."):this.onLanguageError("The button selector is missing. Please provide a valid selector for the button.");startTranslationProcess=async()=>{this.onStartTranslationProcess();const t=this.defaultLang;this.translationStart=!0,this.translateStringEle=jQuery(this.stringSelector),this.totalStringCount=Array.from(this.translateStringEle).map(t=>t.innerText.length).reduce((t,e)=>t+e,0),this.translator=await this.AITranslator(t),this.translateStringEle.length>0&&await this.stringTranslation(this.completedTranslateIndex)};stringTranslation=async t=>{if(!this.translateStatus)return;const e=this.translateStringEle[t];this.onBeforeTranslate(e);const a=e.innerText;let n=[];(e.childNodes.length>0&&!e.querySelector(".notranslate")||e.querySelector(".notranslate"))&&e.childNodes.forEach(t=>{3===t.nodeType&&""!==t.nodeValue.trim()&&n.push(t)}),n.length>0&&await this.stringTranslationBatch(n,0),this.completedCharacterCount+=a.length,this.completedTranslateIndex=t,this.progressBarSelector&&this.updateProgressBar(),this.onAfterTranslate(e),this.translateStringEle.length>t+1&&await this.stringTranslation(this.completedTranslateIndex+1),t===this.translateStringEle.length-1&&(this.translateBtn.prop("disabled",!0),this.onComplete({characterCount:this.completedCharacterCount}),jQuery(this.progressBarSelector).find(".chrome-ai-translator-strings-count").show().find(".totalChars").text(this.formatCharacterCount(this.completedCharacterCount)))};stringTranslationBatch=async(t,e)=>{const a=await this.translator.translate(t[e].nodeValue);return a&&""!==a&&(t[e].nodeValue=a),e<t.length-1&&await this.stringTranslationBatch(t,e+1),!0};addProgressBar=()=>{if(!document.querySelector("#chrome-ai-translator-modal .chrome-ai-translator_progress_bar")){const t=jQuery('\n                <div class="chrome-ai-translator_progress_bar" style="background-color: #f3f3f3;border-radius: 10px;overflow: hidden;margin: 1.5rem auto; width: 50%;">\n                <div class="chrome-ai-translator_progress" style="overflow: hidden;transition: width .5s ease-in-out; border-radius: 10px;text-align: center;width: 0%;height: 20px;box-sizing: border-box;background-color: #4caf50; color: #fff; font-weight: 600;"></div>\n                </div>\n                <div style="display:none; color: white;" class="chrome-ai-translator-strings-count hidden">\n                    Wahooo! You have saved your valuable time via auto translating \n                    <strong class="totalChars">0</strong> characters using \n                    <strong>\n                        Chrome AI Translator\n                    </strong>\n                </div>\n            ');jQuery(this.progressBarSelector).append(t)}};updateProgressBar=()=>{const t=this.completedCharacterCount/this.totalStringCount*1e3/10;let e=t.toString().split(".")[1]||"";e=e.length>0&&"0"!==e[0]?e[0]:"";const a=parseInt(t)+""+(""!==e?"."+e:"");jQuery(".chrome-ai-translator_progress").css({width:`${a}%`}).text(`${a}%`)};stopTranslation=()=>{this.translateStatus=!1};reInit=()=>{this.translateBtnEvents()};startTranslation=()=>{this.translateStatus=!0,this.startTranslationProcess(this.completedTranslateIndex+1)};static svgIcons=t=>({copy:'<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="16px" width="16px" xmlns="http://www.w3.org/2000/svg" fill="#2271b1"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg>'}[t]||"")}const g=u,f=({prefix:t=!1,start:e=!1,end:a=!1,translateStatus:n=!1})=>{const o=(a-e)/1e3,r={};if(t){if(r.provider=t,e&&a){const e=(0,l.select)("block-catfp/translate").getTranslationInfo().translateData[t]?.timeTaken||0;r.timeTaken=o+e}n&&(r.translateStatus=!0),(0,l.dispatch)("block-catfp/translate").translationInfo(r)}},m=async t=>{const e=catfp_global_object.languageObject[t.targetLang].name,a=catfp_global_object.languageObject[t.sourceLang].name,n=(0,l.select)("block-catfp/translate").getAllowedMetaFields(),{translateStatusHandler:o,translateStatus:r}=t;let s=0;const i=await g.Object({mainWrapperSelector:"#catfp_strings_model",btnSelector:`#${t.ID}`,btnClass:"local_ai_translator_btn",btnText:(0,c.__)("Translate To","chrome-ai-translation-for-polylang")+" "+e+" (Beta)",stringSelector:".catfp_string_container tbody tr td.translate:not([data-translate-status='translated'])",progressBarSelector:"#catfp_strings_model .catfp_translate_progress",sourceLanguage:t.sourceLang,targetLanguage:t.targetLang,targetLanguageLabel:e,sourceLanguageLabel:a,onStartTranslationProcess:()=>{s=(new Date).getTime(),jQuery("#catfp_strings_model .modal-content .catfp_string_container")[0].scrollHeight>100&&jQuery("#catfp_strings_model .catfp_translate_progress").fadeIn("slow")},onComplete:()=>{f({prefix:"localAiTranslator",start:s,end:(new Date).getTime(),translateStatus:!0}),setTimeout(()=>{o(!1),jQuery("#catfp_strings_model .catfp_translate_progress").fadeOut("slow")},4e3)},onBeforeTranslate:t=>{const e=jQuery("#catfp_strings_model .modal-content .catfp_string_container");if(e.length<1)return i.stopTranslation(),f({prefix:"localAiTranslator",start:s,end:(new Date).getTime()}),void(s=0);const a=e[0].getBoundingClientRect(),n=t.closest("tr").offsetTop,o=e.height();var r;n>o+a.y&&(r=n-o+t.offsetHeight,e.scrollTop(r))},onAfterTranslate:t=>{const e=t.innerText,a=t.dataset.stringType,o=t.dataset.key,r=t.closest("tr").querySelector('td[data-source="source_text"]').innerText;(({type:t,key:e,translateContent:a,source:n,provider:o,AllowedMetaFields:r})=>{if(["title","excerpt"].includes(t)){const e=`${t}SaveTranslate`;(0,l.dispatch)("block-catfp/translate")[e](a,o)}else["metaFields"].includes(t)?Object.keys(r).includes(e)&&(0,l.dispatch)("block-catfp/translate").metaFieldsSaveTranslate(e,a,n,o):(0,l.dispatch)("block-catfp/translate").contentSaveTranslate(e,a,n,o)})({type:a,key:o,translateContent:e,source:r,provider:"localAiTranslator",AllowedMetaFields:n});const s=(0,l.select)("block-catfp/translate").getTranslationInfo().translateData?.localAiTranslator,c=s&&s.targetStringCount?s.targetStringCount:0,i=s&&s.targetWordCount?s.targetWordCount:0,d=s&&s.targetCharacterCount?s.targetCharacterCount:0;""!==e.trim()&&e.trim().length>0&&(0,l.dispatch)("block-catfp/translate").translationInfo({targetStringCount:c+r.trim().split(/(?<=[.!?]+)\s+/).length,targetWordCount:i+r.trim().split(/\s+/).filter(t=>/[^\p{L}\p{N}]/.test(t)).length,targetCharacterCount:d+r.trim().length,provider:"localAiTranslator"})}});if(i.hasOwnProperty("init")){i.init();const t=document.querySelector("#catfp_localAiTranslator_translate_element .local_ai_translator_btn");t&&r&&(t.disabled=r)}},h=t=>{t=t||{};const{Service:e=!1,openErrorModalHandler:a=()=>{}}=t,n=window.catfp_global_object.catfp_url+"assets/images/error-icon.svg",o={localAiTranslator:{Provider:m,title:"Chrome Built-in AI",SettingBtnText:"Translate",serviceLabel:"Chrome AI Translator",heading:(0,c.sprintf)((0,c.__)("Translate Using %s","chrome-ai-translation-for-polylang"),"Chrome built-in API"),Docs:"https://developer.chrome.com/docs/ai/translator-api",BetaEnabled:!0,ButtonDisabled:t.localAiTranslatorButtonDisabled,ErrorMessage:t.localAiTranslatorButtonDisabled?React.createElement("div",{className:"catfp-provider-error button button-primary",onClick:()=>a("localAiTranslator")},React.createElement("img",{src:n,alt:"error"})," ",(0,c.__)("View Error","chrome-ai-translation-for-polylang")):React.createElement(React.Fragment,null),Logo:"chrome.png"}};return e?o[e]:o},y=t=>{const{service:e}=t,a=(0,l.select)("block-catfp/translate").getTranslationEntry(),n=t.stringModalBodyNotice;return(0,d.useEffect)(()=>{const e=t.service,a=`catfp_${e}_translate_element`;wp.data.select("block-catfp/translate").getTranslationEntry().length>0&&t.postDataFetchStatus&&h({Service:e}).Provider({sourceLang:t.sourceLang,targetLang:t.targetLang,translateStatusHandler:t.translateStatusHandler,ID:a,translateStatus:t.translateStatus,modalRenderId:t.modalRender,destroyUpdateHandler:t.updateDestroyHandler})},[t.modalRender,t.postDataFetchStatus]),React.createElement("div",{className:"modal-body"},a.length>0&&t.postDataFetchStatus?React.createElement(React.Fragment,null,n&&React.createElement("div",{className:"catfp-body-notice-wrapper"},React.createElement(n,null)),React.createElement("div",{className:"catfp_translate_progress",key:t.modalRender},(0,c.__)("Automatic translation is in progress....","chrome-ai-translation-for-polylang"),React.createElement("br",null),(0,c.__)("It will take few minutes, enjoy â˜• coffee in this time!","chrome-ai-translation-for-polylang"),React.createElement("br",null),React.createElement("br",null),(0,c.__)("Please do not leave this window or browser tab while translation is in progress...","chrome-ai-translation-for-polylang")),React.createElement("div",{className:`translator-widget ${e}`,style:{display:"flex"}},React.createElement("h3",{className:"choose-lang"},h({Service:t.service}).heading," ",React.createElement("span",{className:"dashicons-before dashicons-translation"})),React.createElement("div",{className:"catfp_translate_element_wrapper "+(t.translateStatus?"translate-completed":"")},React.createElement("div",{id:`catfp_${t.service}_translate_element`}))),React.createElement("div",{className:"catfp_string_container"},React.createElement("table",{className:"scrolldown",id:"stringTemplate"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"notranslate"},(0,c.__)("S.No","chrome-ai-translation-for-polylang")),React.createElement("th",{className:"notranslate"},(0,c.__)("Source Text","chrome-ai-translation-for-polylang")),React.createElement("th",{className:"notranslate"},(0,c.__)("Translation","chrome-ai-translation-for-polylang")))),React.createElement("tbody",null,t.postDataFetchStatus&&React.createElement(React.Fragment,null,a.map((e,a)=>React.createElement(s.Fragment,{key:a+t.translatePendingStatus},void 0!==e.source&&""!==e.source.trim()&&React.createElement(React.Fragment,null,React.createElement("tr",{key:a+"tr"+t.translatePendingStatus},React.createElement("td",null,a+1),React.createElement("td",{"data-source":"source_text"},e.source),t.translatePendingStatus?React.createElement("td",{className:"translate",translate:"yes","data-key":e.id,"data-string-type":e.type},React.createElement(p,{service:t.service,content:e.source,contentKey:e.id})):React.createElement("td",{className:"translate","data-translate-status":"translated","data-key":e.id,"data-string-type":e.type},e.translatedData[t.service])))))))))):t.postDataFetchStatus?React.createElement("p",null,(0,c.__)("No strings are available for translation","chrome-ai-translation-for-polylang")):React.createElement("div",{className:"catfp-skeleton-loader-wrapper"},React.createElement("div",{className:"translate-widget"},React.createElement("div",{className:"catfp-skeleton-loader-mini"}),React.createElement("div",{className:"catfp-skeleton-loader-mini"})),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"notranslate"},(0,c.__)("S.No","chrome-ai-translation-for-polylang")),React.createElement("th",{className:"notranslate"},(0,c.__)("Source Text","chrome-ai-translation-for-polylang")),React.createElement("th",{className:"notranslate"},(0,c.__)("Translation","chrome-ai-translation-for-polylang")))),React.createElement("tbody",null,[...Array(10)].map((t,e)=>React.createElement("tr",{key:e},React.createElement("td",null,React.createElement("div",{className:"catfp-skeleton-loader-mini"})),React.createElement("td",null,React.createElement("div",{className:"catfp-skeleton-loader-mini"})),React.createElement("td",null,React.createElement("div",{className:"catfp-skeleton-loader-mini"}))))))))},_=t=>React.createElement("div",{className:`notice inline notice-info is-dismissible ${t.className}`},Array.isArray(t.children)?t.children.join(" "):t.children),b=({number:t})=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t,w=t=>React.createElement("div",{className:"modal-footer",key:t.modalRender},!t.translatePendingStatus&&React.createElement(_,{className:"catfp_string_count"},React.createElement("p",null,(0,c.__)("Wahooo! You have saved your valuable time via auto translating","chrome-ai-translation-for-polylang")," ",React.createElement("strong",null,React.createElement(b,{number:t.characterCount}))," ",(0,c.__)("characters using","chrome-ai-translation-for-polylang")," ",React.createElement("strong",null,t.serviceLabel),".")),React.createElement("div",{className:"save_btn_cont"},React.createElement("button",{className:"notranslate save_it button button-primary",disabled:t.translatePendingStatus,onClick:t.updatePostData},t.translateButtonStatus?React.createElement(React.Fragment,null,React.createElement("span",{className:"updating-text"},(0,c.__)("Updating","chrome-ai-translation-for-polylang"),React.createElement("span",{className:"dot",style:{"--i":0}}),React.createElement("span",{className:"dot",style:{"--i":1}}),React.createElement("span",{className:"dot",style:{"--i":2}}))):(0,c.__)("Update Content","chrome-ai-translation-for-polylang"))));function T(){return T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},T.apply(null,arguments)}const E=t=>{let e=t.service;const a=(0,l.select)("block-catfp/translate").getTranslationInfo().translateData[e]||!1,n=a?.translateStatus||!1,[o,r]=(0,s.useState)(!0),[c,d]=(0,s.useState)(""),[p,u]=(0,s.useState)(!0),[g,f]=(0,s.useState)(a?.targetCharacterCount||0),[m,h]=(0,s.useState)([]),[_,b]=(0,s.useState)(!1),E=t=>{h(e=>[...e,t])};(0,s.useEffect)(()=>{o||m.length>0&&m.forEach(t=>{"function"==typeof t&&t()})},[o,m]);const S=()=>{const e=t.service;return"localAiTranslator"===e?"Chrome AI Translator":e.replace(/^\w/,t=>t.toUpperCase())+" Translate"};(0,s.useEffect)(()=>{t.postDataFetchStatus||t.fetchPostData({postId:t.postId,sourceLang:t.sourceLang,targetLang:t.targetLang,updatePostDataFetch:t.updatePostDataFetch,refPostData:t=>d(e=>({...e,...t})),updateDestroyHandler:E})},[t.postDataFetchStatus,t.modalRender]);const v=t=>{u(!0),r(!1)},k=()=>{if(_)return;const e=c;let a=t.service;b(!0),t.translatePost({postContent:e,modalClose:()=>{r(!1),v()},service:a}),t.pageTranslate(!0)};return(0,s.useEffect)(()=>{r(!0),n&&(f(a?.targetCharacterCount||0),u(!1)),setTimeout(()=>{const t=document.querySelector(".catfp_string_container");t&&(t.scrollTop=0)})},[t.modalRender]),React.createElement(React.Fragment,null," ",o&&React.createElement("div",{id:`catfp-${t.service}-strings-modal`,className:"modal-container",style:{display:o?"flex":"none"},"data-render-id":t.modalRender},React.createElement("div",{className:"modal-content"},React.createElement(i,{modalRender:t.modalRender,setPopupVisibility:v,postContent:c,translatePendingStatus:p,pageTranslate:t.pageTranslate,service:t.service,serviceLabel:S(),updatePostData:k,characterCount:g,translateButtonStatus:_}),React.createElement(y,T({},t,{updatePostContent:t=>{d(t)},contentLoading:t.contentLoading,postDataFetchStatus:t.postDataFetchStatus,translatePendingStatus:p,service:t.service,sourceLang:t.sourceLang,targetLang:t.targetLang,translateStatusHandler:e=>{let a=t.service;const n=(0,l.select)("block-catfp/translate").getTranslationInfo().translateData[a]?.targetCharacterCount||0;f(n),u(e)},modalRender:t.modalRender,translateStatus:n,stringModalBodyNotice:t.stringModalBodyNotice,updateDestroyHandler:E})),React.createElement(w,{modalRender:t.modalRender,setPopupVisibility:v,postContent:c,translatePendingStatus:p,pageTranslate:t.pageTranslate,service:t.service,serviceLabel:S(),updatePostData:k,characterCount:g,translateButtonStatus:_}))))},S=({setSettingVisibility:t})=>React.createElement("div",{className:"modal-header"},React.createElement("h2",null,(0,c.__)("Step 1 - Select Translation Provider","chrome-ai-translation-for-polylang")),React.createElement("span",{className:"close",onClick:()=>t(!1)},"Ã—")),v=t=>{const e=t.Service,a=t[e+"Disabled"],n=h({Service:e,[e+"ButtonDisabled"]:a,openErrorModalHandler:t.openErrorModalHandler}),o=`catfp-${e.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/[^a-z0-9-]/g,"")}-btn`;return React.createElement("tr",null,React.createElement("td",{className:"catfp-provider-name"},React.createElement("img",{src:`${t.imgFolder}${n.Logo}`,alt:n.title}),React.createElement("span",null,n.title)),React.createElement("td",null,n.ButtonDisabled?n.ErrorMessage:React.createElement("div",{id:o,onClick:t.fetchContent,className:"catfp-service-btn button button-primary","data-service":e,"data-service-label":n.ServiceLabel},n.SettingBtnText)),React.createElement("td",null,React.createElement("a",{href:n.Docs,target:"_blank",rel:"noopener noreferrer",className:"catfp-doc-icon"},React.createElement("svg",{width:"9",height:"12",viewBox:"0 0 9 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M2.17607 6.20533H6.82393V5.53867H2.17607V6.20533ZM2.17607 8.05133H6.82393V7.38467H2.17607V8.05133ZM2.17607 9.898H4.89536V9.23133H2.17607V9.898ZM1.03821 12C0.7425 12 0.495643 11.8973 0.297643 11.692C0.0996427 11.4867 0.000428571 11.2304 0 10.9233V1.07667C0 0.77 0.0992142 0.514 0.297643 0.308667C0.496071 0.103333 0.743143 0.000444444 1.03886 0H6.10714L9 3V10.9233C9 11.23 8.901 11.4862 8.703 11.692C8.505 11.8978 8.25771 12.0004 7.96114 12H1.03821ZM5.78571 3.33333V0.666667H1.03886C0.939857 0.666667 0.849 0.709333 0.766286 0.794666C0.683571 0.88 0.642429 0.974 0.642857 1.07667V10.9233C0.642857 11.0256 0.684 11.1196 0.766286 11.2053C0.848571 11.2911 0.939214 11.3338 1.03821 11.3333H7.96179C8.06036 11.3333 8.151 11.2907 8.23371 11.2053C8.31643 11.12 8.35757 11.0258 8.35714 10.9227V3.33333H5.78571Z",fill:"#6F6F6F"})))))};function k(){return k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},k.apply(null,arguments)}const R=t=>{const e=h();return React.createElement("div",{className:"catfp-setting-modal-body"},React.createElement("div",{className:"catfp-setting-modal-notice-wrapper"}),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"Translate"),React.createElement("th",null,"Docs"))),React.createElement("tbody",null,Object.keys(e).map(e=>React.createElement(v,k({key:e},t,{Service:e}))))))},C=t=>{const{targetLangName:e,postType:a,sourceLangName:n,setSettingVisibility:o}=t;return React.createElement("div",{className:"modal-footer"},React.createElement("p",{className:"catfp-error-message",style:{marginBottom:".5rem"}},sprintf((0,c.__)("This will replace your current %(postType)s with a %(target)s translation of the original %(source)s content.","chrome-ai-translation-for-polylang"),{postType:a,source:n,target:e})),React.createElement("button",{className:"catfp-setting-close button button-primary",onClick:()=>o(!1)},(0,c.__)("Close","chrome-ai-translation-for-polylang")))},{entries:x,setPrototypeOf:A,isFrozen:L,getPrototypeOf:N,getOwnPropertyDescriptor:O}=Object;let{freeze:D,seal:j,create:$}=Object,{apply:I,construct:F}="undefined"!=typeof Reflect&&Reflect;D||(D=function(t){return t}),j||(j=function(t){return t}),I||(I=function(t,e){for(var a=arguments.length,n=new Array(a>2?a-2:0),o=2;o<a;o++)n[o-2]=arguments[o];return t.apply(e,n)}),F||(F=function(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];return new t(...a)});const P=X(Array.prototype.forEach),M=X(Array.prototype.lastIndexOf),B=X(Array.prototype.pop),H=X(Array.prototype.push),U=X(Array.prototype.splice),z=X(String.prototype.toLowerCase),W=X(String.prototype.toString),q=X(String.prototype.match),V=X(String.prototype.replace),G=X(String.prototype.indexOf),Q=X(String.prototype.trim),Y=X(Object.prototype.hasOwnProperty),J=X(RegExp.prototype.test),Z=(K=TypeError,function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return F(K,e)});var K;function X(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var a=arguments.length,n=new Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];return I(t,e,n)}}function tt(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z;A&&A(t,null);let n=e.length;for(;n--;){let o=e[n];if("string"==typeof o){const t=a(o);t!==o&&(L(e)||(e[n]=t),o=t)}t[o]=!0}return t}function et(t){for(let e=0;e<t.length;e++)Y(t,e)||(t[e]=null);return t}function at(t){const e=$(null);for(const[a,n]of x(t))Y(t,a)&&(Array.isArray(n)?e[a]=et(n):n&&"object"==typeof n&&n.constructor===Object?e[a]=at(n):e[a]=n);return e}function nt(t,e){for(;null!==t;){const a=O(t,e);if(a){if(a.get)return X(a.get);if("function"==typeof a.value)return X(a.value)}t=N(t)}return function(){return null}}const ot=D(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rt=D(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),st=D(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),lt=D(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ct=D(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),it=D(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),dt=D(["#text"]),pt=D(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ut=D(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),gt=D(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ft=D(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mt=j(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ht=j(/<%[\w\W]*|[\w\W]*%>/gm),yt=j(/\$\{[\w\W]*/gm),_t=j(/^data-[\-\w.\u00B7-\uFFFF]+$/),bt=j(/^aria-[\-\w]+$/),wt=j(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Tt=j(/^(?:\w+script|data):/i),Et=j(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),St=j(/^html$/i),vt=j(/^[a-z][.\w]*(-[.\w]+)+$/i);var kt=Object.freeze({__proto__:null,ARIA_ATTR:bt,ATTR_WHITESPACE:Et,CUSTOM_ELEMENT:vt,DATA_ATTR:_t,DOCTYPE_NAME:St,ERB_EXPR:ht,IS_ALLOWED_URI:wt,IS_SCRIPT_OR_DATA:Tt,MUSTACHE_EXPR:mt,TMPLIT_EXPR:yt});const Rt=function(){return"undefined"==typeof window?null:window};var Ct=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt();const a=e=>t(e);if(a.version="3.3.0",a.removed=[],!e||!e.document||9!==e.document.nodeType||!e.Element)return a.isSupported=!1,a;let{document:n}=e;const o=n,r=o.currentScript,{DocumentFragment:s,HTMLTemplateElement:l,Node:c,Element:i,NodeFilter:d,NamedNodeMap:p=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:u,DOMParser:g,trustedTypes:f}=e,m=i.prototype,h=nt(m,"cloneNode"),y=nt(m,"remove"),_=nt(m,"nextSibling"),b=nt(m,"childNodes"),w=nt(m,"parentNode");if("function"==typeof l){const t=n.createElement("template");t.content&&t.content.ownerDocument&&(n=t.content.ownerDocument)}let T,E="";const{implementation:S,createNodeIterator:v,createDocumentFragment:k,getElementsByTagName:R}=n,{importNode:C}=o;let A={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};a.isSupported="function"==typeof x&&"function"==typeof w&&S&&void 0!==S.createHTMLDocument;const{MUSTACHE_EXPR:L,ERB_EXPR:N,TMPLIT_EXPR:O,DATA_ATTR:j,ARIA_ATTR:I,IS_SCRIPT_OR_DATA:F,ATTR_WHITESPACE:K,CUSTOM_ELEMENT:X}=kt;let{IS_ALLOWED_URI:et}=kt,mt=null;const ht=tt({},[...ot,...rt,...st,...ct,...dt]);let yt=null;const _t=tt({},[...pt,...ut,...gt,...ft]);let bt=Object.seal($(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Tt=null,Et=null;const vt=Object.seal($(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Ct=!0,xt=!0,At=!1,Lt=!0,Nt=!1,Ot=!0,Dt=!1,jt=!1,$t=!1,It=!1,Ft=!1,Pt=!1,Mt=!0,Bt=!1,Ht=!0,Ut=!1,zt={},Wt=null;const qt=tt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Vt=null;const Gt=tt({},["audio","video","img","source","image","track"]);let Qt=null;const Yt=tt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Jt="http://www.w3.org/1998/Math/MathML",Zt="http://www.w3.org/2000/svg",Kt="http://www.w3.org/1999/xhtml";let Xt=Kt,te=!1,ee=null;const ae=tt({},[Jt,Zt,Kt],W);let ne=tt({},["mi","mo","mn","ms","mtext"]),oe=tt({},["annotation-xml"]);const re=tt({},["title","style","font","a","script"]);let se=null;const le=["application/xhtml+xml","text/html"];let ce=null,ie=null;const de=n.createElement("form"),pe=function(t){return t instanceof RegExp||t instanceof Function},ue=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ie||ie!==t){if(t&&"object"==typeof t||(t={}),t=at(t),se=-1===le.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,ce="application/xhtml+xml"===se?W:z,mt=Y(t,"ALLOWED_TAGS")?tt({},t.ALLOWED_TAGS,ce):ht,yt=Y(t,"ALLOWED_ATTR")?tt({},t.ALLOWED_ATTR,ce):_t,ee=Y(t,"ALLOWED_NAMESPACES")?tt({},t.ALLOWED_NAMESPACES,W):ae,Qt=Y(t,"ADD_URI_SAFE_ATTR")?tt(at(Yt),t.ADD_URI_SAFE_ATTR,ce):Yt,Vt=Y(t,"ADD_DATA_URI_TAGS")?tt(at(Gt),t.ADD_DATA_URI_TAGS,ce):Gt,Wt=Y(t,"FORBID_CONTENTS")?tt({},t.FORBID_CONTENTS,ce):qt,Tt=Y(t,"FORBID_TAGS")?tt({},t.FORBID_TAGS,ce):at({}),Et=Y(t,"FORBID_ATTR")?tt({},t.FORBID_ATTR,ce):at({}),zt=!!Y(t,"USE_PROFILES")&&t.USE_PROFILES,Ct=!1!==t.ALLOW_ARIA_ATTR,xt=!1!==t.ALLOW_DATA_ATTR,At=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Lt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Nt=t.SAFE_FOR_TEMPLATES||!1,Ot=!1!==t.SAFE_FOR_XML,Dt=t.WHOLE_DOCUMENT||!1,It=t.RETURN_DOM||!1,Ft=t.RETURN_DOM_FRAGMENT||!1,Pt=t.RETURN_TRUSTED_TYPE||!1,$t=t.FORCE_BODY||!1,Mt=!1!==t.SANITIZE_DOM,Bt=t.SANITIZE_NAMED_PROPS||!1,Ht=!1!==t.KEEP_CONTENT,Ut=t.IN_PLACE||!1,et=t.ALLOWED_URI_REGEXP||wt,Xt=t.NAMESPACE||Kt,ne=t.MATHML_TEXT_INTEGRATION_POINTS||ne,oe=t.HTML_INTEGRATION_POINTS||oe,bt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&pe(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(bt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&pe(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(bt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(bt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Nt&&(xt=!1),Ft&&(It=!0),zt&&(mt=tt({},dt),yt=[],!0===zt.html&&(tt(mt,ot),tt(yt,pt)),!0===zt.svg&&(tt(mt,rt),tt(yt,ut),tt(yt,ft)),!0===zt.svgFilters&&(tt(mt,st),tt(yt,ut),tt(yt,ft)),!0===zt.mathMl&&(tt(mt,ct),tt(yt,gt),tt(yt,ft))),t.ADD_TAGS&&("function"==typeof t.ADD_TAGS?vt.tagCheck=t.ADD_TAGS:(mt===ht&&(mt=at(mt)),tt(mt,t.ADD_TAGS,ce))),t.ADD_ATTR&&("function"==typeof t.ADD_ATTR?vt.attributeCheck=t.ADD_ATTR:(yt===_t&&(yt=at(yt)),tt(yt,t.ADD_ATTR,ce))),t.ADD_URI_SAFE_ATTR&&tt(Qt,t.ADD_URI_SAFE_ATTR,ce),t.FORBID_CONTENTS&&(Wt===qt&&(Wt=at(Wt)),tt(Wt,t.FORBID_CONTENTS,ce)),Ht&&(mt["#text"]=!0),Dt&&tt(mt,["html","head","body"]),mt.table&&(tt(mt,["tbody"]),delete Tt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw Z('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw Z('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=t.TRUSTED_TYPES_POLICY,E=T.createHTML("")}else void 0===T&&(T=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let a=null;const n="data-tt-policy-suffix";e&&e.hasAttribute(n)&&(a=e.getAttribute(n));const o="dompurify"+(a?"#"+a:"");try{return t.createPolicy(o,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(f,r)),null!==T&&"string"==typeof E&&(E=T.createHTML(""));D&&D(t),ie=t}},ge=tt({},[...rt,...st,...lt]),fe=tt({},[...ct,...it]),me=function(t){H(a.removed,{element:t});try{w(t).removeChild(t)}catch(e){y(t)}},he=function(t,e){try{H(a.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){H(a.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(It||Ft)try{me(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},ye=function(t){let e=null,a=null;if($t)t="<remove></remove>"+t;else{const e=q(t,/^[\r\n\t ]+/);a=e&&e[0]}"application/xhtml+xml"===se&&Xt===Kt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const o=T?T.createHTML(t):t;if(Xt===Kt)try{e=(new g).parseFromString(o,se)}catch(t){}if(!e||!e.documentElement){e=S.createDocument(Xt,"template",null);try{e.documentElement.innerHTML=te?E:o}catch(t){}}const r=e.body||e.documentElement;return t&&a&&r.insertBefore(n.createTextNode(a),r.childNodes[0]||null),Xt===Kt?R.call(e,Dt?"html":"body")[0]:Dt?e.documentElement:r},_e=function(t){return v.call(t.ownerDocument||t,t,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},be=function(t){return t instanceof u&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof p)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},we=function(t){return"function"==typeof c&&t instanceof c};function Te(t,e,n){P(t,t=>{t.call(a,e,n,ie)})}const Ee=function(t){let e=null;if(Te(A.beforeSanitizeElements,t,null),be(t))return me(t),!0;const n=ce(t.nodeName);if(Te(A.uponSanitizeElement,t,{tagName:n,allowedTags:mt}),Ot&&t.hasChildNodes()&&!we(t.firstElementChild)&&J(/<[/\w!]/g,t.innerHTML)&&J(/<[/\w!]/g,t.textContent))return me(t),!0;if(7===t.nodeType)return me(t),!0;if(Ot&&8===t.nodeType&&J(/<[/\w]/g,t.data))return me(t),!0;if(!(vt.tagCheck instanceof Function&&vt.tagCheck(n))&&(!mt[n]||Tt[n])){if(!Tt[n]&&ve(n)){if(bt.tagNameCheck instanceof RegExp&&J(bt.tagNameCheck,n))return!1;if(bt.tagNameCheck instanceof Function&&bt.tagNameCheck(n))return!1}if(Ht&&!Wt[n]){const e=w(t)||t.parentNode,a=b(t)||t.childNodes;if(a&&e)for(let n=a.length-1;n>=0;--n){const o=h(a[n],!0);o.__removalCount=(t.__removalCount||0)+1,e.insertBefore(o,_(t))}}return me(t),!0}return t instanceof i&&!function(t){let e=w(t);e&&e.tagName||(e={namespaceURI:Xt,tagName:"template"});const a=z(t.tagName),n=z(e.tagName);return!!ee[t.namespaceURI]&&(t.namespaceURI===Zt?e.namespaceURI===Kt?"svg"===a:e.namespaceURI===Jt?"svg"===a&&("annotation-xml"===n||ne[n]):Boolean(ge[a]):t.namespaceURI===Jt?e.namespaceURI===Kt?"math"===a:e.namespaceURI===Zt?"math"===a&&oe[n]:Boolean(fe[a]):t.namespaceURI===Kt?!(e.namespaceURI===Zt&&!oe[n])&&!(e.namespaceURI===Jt&&!ne[n])&&!fe[a]&&(re[a]||!ge[a]):!("application/xhtml+xml"!==se||!ee[t.namespaceURI]))}(t)?(me(t),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!J(/<\/no(script|embed|frames)/i,t.innerHTML)?(Nt&&3===t.nodeType&&(e=t.textContent,P([L,N,O],t=>{e=V(e,t," ")}),t.textContent!==e&&(H(a.removed,{element:t.cloneNode()}),t.textContent=e)),Te(A.afterSanitizeElements,t,null),!1):(me(t),!0)},Se=function(t,e,a){if(Mt&&("id"===e||"name"===e)&&(a in n||a in de))return!1;if(xt&&!Et[e]&&J(j,e));else if(Ct&&J(I,e));else if(vt.attributeCheck instanceof Function&&vt.attributeCheck(e,t));else if(!yt[e]||Et[e]){if(!(ve(t)&&(bt.tagNameCheck instanceof RegExp&&J(bt.tagNameCheck,t)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(t))&&(bt.attributeNameCheck instanceof RegExp&&J(bt.attributeNameCheck,e)||bt.attributeNameCheck instanceof Function&&bt.attributeNameCheck(e,t))||"is"===e&&bt.allowCustomizedBuiltInElements&&(bt.tagNameCheck instanceof RegExp&&J(bt.tagNameCheck,a)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(a))))return!1}else if(Qt[e]);else if(J(et,V(a,K,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==G(a,"data:")||!Vt[t])if(At&&!J(F,V(a,K,"")));else if(a)return!1;return!0},ve=function(t){return"annotation-xml"!==t&&q(t,X)},ke=function(t){Te(A.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||be(t))return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:yt,forceKeepAttr:void 0};let o=e.length;for(;o--;){const r=e[o],{name:s,namespaceURI:l,value:c}=r,i=ce(s),d=c;let p="value"===s?d:Q(d);if(n.attrName=i,n.attrValue=p,n.keepAttr=!0,n.forceKeepAttr=void 0,Te(A.uponSanitizeAttribute,t,n),p=n.attrValue,!Bt||"id"!==i&&"name"!==i||(he(s,t),p="user-content-"+p),Ot&&J(/((--!?|])>)|<\/(style|title|textarea)/i,p)){he(s,t);continue}if("attributename"===i&&q(p,"href")){he(s,t);continue}if(n.forceKeepAttr)continue;if(!n.keepAttr){he(s,t);continue}if(!Lt&&J(/\/>/i,p)){he(s,t);continue}Nt&&P([L,N,O],t=>{p=V(p,t," ")});const u=ce(t.nodeName);if(Se(u,i,p)){if(T&&"object"==typeof f&&"function"==typeof f.getAttributeType)if(l);else switch(f.getAttributeType(u,i)){case"TrustedHTML":p=T.createHTML(p);break;case"TrustedScriptURL":p=T.createScriptURL(p)}if(p!==d)try{l?t.setAttributeNS(l,s,p):t.setAttribute(s,p),be(t)?me(t):B(a.removed)}catch(e){he(s,t)}}else he(s,t)}Te(A.afterSanitizeAttributes,t,null)},Re=function t(e){let a=null;const n=_e(e);for(Te(A.beforeSanitizeShadowDOM,e,null);a=n.nextNode();)Te(A.uponSanitizeShadowNode,a,null),Ee(a),ke(a),a.content instanceof s&&t(a.content);Te(A.afterSanitizeShadowDOM,e,null)};return a.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null,l=null,i=null;if(te=!t,te&&(t="\x3c!--\x3e"),"string"!=typeof t&&!we(t)){if("function"!=typeof t.toString)throw Z("toString is not a function");if("string"!=typeof(t=t.toString()))throw Z("dirty is not a string, aborting")}if(!a.isSupported)return t;if(jt||ue(e),a.removed=[],"string"==typeof t&&(Ut=!1),Ut){if(t.nodeName){const e=ce(t.nodeName);if(!mt[e]||Tt[e])throw Z("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof c)n=ye("\x3c!----\x3e"),r=n.ownerDocument.importNode(t,!0),1===r.nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?n=r:n.appendChild(r);else{if(!It&&!Nt&&!Dt&&-1===t.indexOf("<"))return T&&Pt?T.createHTML(t):t;if(n=ye(t),!n)return It?null:Pt?E:""}n&&$t&&me(n.firstChild);const d=_e(Ut?t:n);for(;l=d.nextNode();)Ee(l),ke(l),l.content instanceof s&&Re(l.content);if(Ut)return t;if(It){if(Ft)for(i=k.call(n.ownerDocument);n.firstChild;)i.appendChild(n.firstChild);else i=n;return(yt.shadowroot||yt.shadowrootmode)&&(i=C.call(o,i,!0)),i}let p=Dt?n.outerHTML:n.innerHTML;return Dt&&mt["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&J(St,n.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+p),Nt&&P([L,N,O],t=>{p=V(p,t," ")}),T&&Pt?T.createHTML(p):p},a.setConfig=function(){ue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),jt=!0},a.clearConfig=function(){ie=null,jt=!1},a.isValidAttribute=function(t,e,a){ie||ue({});const n=ce(t),o=ce(e);return Se(n,o,a)},a.addHook=function(t,e){"function"==typeof e&&H(A[t],e)},a.removeHook=function(t,e){if(void 0!==e){const a=M(A[t],e);return-1===a?void 0:U(A[t],a,1)[0]}return B(A[t])},a.removeHooks=function(t){A[t]=[]},a.removeAllHooks=function(){A={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},a}();const xt=({message:t,onClose:e,Title:a})=>{let n=jQuery("<div>").append(t);const o=n.html();return n.remove(),n=null,(0,s.useEffect)(()=>{const t=document.querySelectorAll(".chrome-ai-translator-flags");if(t.length>0)return t.forEach(t=>{t.classList.add("catfp-tooltip-element"),t.addEventListener("click",e=>{if(e.preventDefault(),t.querySelector(".catfp-tooltip"))return;let a=document.createElement("span");a.textContent="Text to be copied.",a.className="catfp-tooltip",t.appendChild(a),(async({text:t=!1,startCopyStatus:e=()=>{},endCopyStatus:a=()=>{}})=>{if(t&&""!==t)try{if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(t);else{const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand&&document.execCommand("copy"),document.body.removeChild(e)}e(),setTimeout(()=>a(),800)}catch(t){console.error("Error copying text to clipboard:",t)}})({text:t.getAttribute("data-clipboard-text"),startCopyStatus:()=>{a.classList.add("catfp-tooltip-active")},endCopyStatus:()=>{setTimeout(()=>{a.remove()},800)}})})}),()=>{t.forEach(t=>{t.removeEventListener("click",()=>{})})}},[]),React.createElement("div",{className:"catfp-error-modal-box-container"},React.createElement("div",{className:"catfp-error-modal-box"},React.createElement("div",{className:"catfp-error-modal-box-header"},React.createElement("span",{className:"catfp-error-modal-box-close",onClick:e},"Ã—"),a&&React.createElement("h3",null,a)),React.createElement("div",{className:"catfp-error-modal-box-body"},React.createElement("p",{dangerouslySetInnerHTML:{__html:Ct.sanitize(o)}})),React.createElement("div",{className:"catfp-error-modal-box-footer"},React.createElement("button",{className:"catfp-error-modal-box-close button button-primary",onClick:e},"Close"))))};function At(){return At=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},At.apply(null,arguments)}const Lt=t=>{const[e,a]=(0,s.useState)({}),[n,o]=(0,s.useState)(0),[l,i]=(0,s.useState)(!1),d=catfp_global_object.source_lang,p=t.targetLang,u=catfp_global_object.languageObject[d].name,f=catfp_global_object.languageObject[p].name,m=catfp_global_object.catfp_url+"assets/images/",[h,y]=(0,s.useState)({}),[_,b]=(0,s.useState)(!1),[w,T]=(0,s.useState)(!1),v=t=>{t.preventDefault();const e=t.target;"yes"===e.dataset.value&&i(!0),e.closest("#catfp-modal-open-warning-wrapper").remove()};(0,s.useEffect)(()=>{const e=document.querySelectorAll("#catfp-modal-open-warning-wrapper .modal-content div[data-value]"),a=document.querySelector(t.translateWrpSelector);a&&a.addEventListener("click",t=>{t.preventDefault(),i(t=>!t)}),e.forEach(t=>{t&&t.addEventListener("click",v)})},[]),(0,s.useEffect)(()=>{l&&(async()=>{const t=await g.languageSupportedStatus(d,p,f,u),e=document.querySelector(".catfp-service-btn#catfp-local-ai-translator-btn");!0!==t&&"object"==typeof t&&e&&(T(!0),y(e=>({...e,localAiTranslator:{message:t,Title:(0,c.__)("Chrome AI Translator","chrome-ai-translation-for-polylang")}})))})()},[l]),(0,s.useEffect)(()=>{const a=e,o=a.dataset&&a.dataset.service,s=a.dataset&&a.dataset.serviceLabel,l=t.postId,c=document.getElementById("catfp_strings_model");c&&(c._reactRoot||(c._reactRoot=r.createRoot(c)),n&&c._reactRoot.render(React.createElement(E,{currentPostId:t.currentPostId,postId:l,service:o,serviceLabel:s,sourceLang:d,targetLang:p,modalRender:n,pageTranslate:t.pageTranslate,postDataFetchStatus:t.postDataFetchStatus,fetchPostData:t.fetchPostData,translatePost:t.translatePost,contentLoading:t.contentLoading,updatePostDataFetch:t.updatePostDataFetch,stringModalBodyNotice:t.stringModalBodyNotice})))},[t.postDataFetchStatus,n]);const k=t=>{i(t)};return React.createElement(React.Fragment,null,_&&h[_]&&React.createElement(xt,At({onClose:()=>{b(!1),i(!0)}},h[_])),l&&React.createElement("div",{className:"modal-container",style:{display:l?"flex":"none"}},React.createElement("div",{className:"catfp-settings modal-content"},React.createElement(S,{setSettingVisibility:k,postType:t.postType,sourceLangName:u,targetLangName:f}),React.createElement(R,{fetchContent:async t=>{let e=t.target.classList.contains("catfp-service-btn")?t.target:t.target.closest(".catfp-service-btn");if(!e)return;const n=e.dataset&&e.dataset.service;if(i(!1),"localAiTranslator"===n){const t=await g.languageSupportedStatus(d,p,f);if(!0!==t&&"object"==typeof t)return}o(t=>t+1),a(e)},imgFolder:m,targetLangName:f,postType:t.postType,sourceLangName:u,localAiTranslatorDisabled:w,openErrorModalHandler:t=>{i(!1),b(t)}}),React.createElement(C,{targetLangName:f,postType:t.postType,sourceLangName:u,setSettingVisibility:k}))))},Nt="SAVE_SOURCE_TITLE",Ot="SAVE_TRANSLATE_TITLE",Dt="SAVE_SOURCE_EXCERPT",jt="SAVE_TRANSLATE_EXCERPT",$t="SAVE_SOURCE_CONTENT",It="SAVE_TRANSLATE_CONTENT",Ft="SAVE_SOURCE_META_FIELDS",Pt="SAVE_TRANSLATE_META_FIELDS",Mt="SET_BLOCK_RULES",Bt="SAVE_TRANSLATE_INFO",Ht="ALLOWED_META_FIELDS",Ut="CONTENT_FETCH_STATUS",zt={title:{},excerpt:{},content:[],metaFields:{},allowedMetaFields:{},contentFetchStatus:!1},Wt=t=>({type:Nt,text:t}),qt=(t,e)=>({type:Ot,text:t,provider:e}),Vt=t=>({type:Dt,text:t}),Gt=(t,e)=>({type:jt,text:t,provider:e}),Qt=(t,e)=>({type:$t,text:e,id:t}),Yt=(t,e,a,n)=>({type:It,text:e,id:t,source:a,provider:n}),Jt=(t,e)=>({type:Ft,text:e,id:t}),Zt=(t,e,a,n)=>({type:Pt,text:e,id:t,source:a,provider:n}),Kt=t=>({type:Mt,data:t}),Xt=({sourceStringCount:t=null,sourceWordCount:e=null,sourceCharacterCount:a=null,timeTaken:n=null,provider:o=null,targetStringCount:r=null,targetWordCount:s=null,targetCharacterCount:l=null,translateStatus:c=null})=>({type:Bt,sourceStringCount:t,sourceWordCount:e,sourceCharacterCount:a,timeTaken:n,targetStringCount:r,targetWordCount:s,targetCharacterCount:l,provider:o,translateStatus:c}),te=({id:t,type:e})=>({type:Ht,id:t,inputType:e}),ee=t=>({type:Ut,status:t}),ae=t=>{const e=new Array;return t.title.source&&e.push({id:"title",source:t.title.source,type:"title",translatedData:t.title.translatedData||{}}),t.excerpt.source&&e.push({id:"excerpt",source:t.excerpt.source,type:"excerpt",translatedData:t.excerpt.translatedData||{}}),Object.keys(t.metaFields).map(a=>{e.push({type:"metaFields",id:a,source:t.metaFields[a].source,translatedData:t.metaFields[a].translatedData||{}})}),Object.keys(t.content).map(a=>{e.push({type:"content",id:a,source:t.content[a].source,translatedData:t.content[a].translatedData||{}})}),e},ne=t=>t.blockRules,oe=(t,e,a,n=null,o=null)=>["title","excerpt"].includes(e)&&t[e].source===a&&t[e].translatedData&&t[e].translatedData[o]?t[e]?.translatedData[o]||t[e]?.source:"metaFields"===e&&t.metaFields&&t.metaFields[n]&&t.metaFields[n].source===a&&t.metaFields[n].translatedData&&t.metaFields[n].translatedData[o]?void 0!==t.metaFields[n]?.translatedData[o]?t.metaFields[n]?.translatedData[o]:t.metaFields[n]?.source:"content"===e&&t.content&&t.content[n]&&t.content[n].source===a&&t.content[n].translatedData&&t.content[n].translatedData[o]?void 0!==t.content[n]?.translatedData[o]?t.content[n]?.translatedData[o]:t.content[n]?.source:a,re=t=>({sourceStringCount:t?.translationInfo?.sourceStringCount||0,sourceWordCount:t?.translationInfo?.sourceWordCount||0,sourceCharacterCount:t?.translationInfo?.sourceCharacterCount||0,translateData:t?.translationInfo?.translateData||{}}),se=t=>t.allowedMetaFields||{},le=t=>t.contentFetchStatus,{createReduxStore:ce,register:ie}=wp.data;ie(ce("block-catfp/translate",{reducer:(t=zt,e)=>{switch(e.type){case Nt:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,title:{...t.title,source:e.text}}:t;case Ot:return{...t,title:{...t.title,translatedData:{...t.title.translatedData||[],[e.provider]:e.text}}};case Dt:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,excerpt:{...t.excerpt,source:e.text}}:t;case jt:return{...t,excerpt:{...t.excerpt,translatedData:{...t.excerpt.translatedData||[],[e.provider]:e.text}}};case $t:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,content:{...t.content,[e.id]:{...t.content[e.id]||[],source:e.text}}}:t;case It:return t.content[e.id].source===e.source?{...t,content:{...t.content,[e.id]:{...t.content[e.id]||[],translatedData:{...t.content[e.id].translatedData||[],[e.provider]:e.text}}}}:t;case Ft:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,metaFields:{...t.metaFields,[e.id]:{...t.metaFields[e.id]||[],source:e.text}}}:t;case Pt:return{...t,metaFields:{...t.metaFields,[e.id]:{...t.metaFields[e.id]||[],translatedData:{...t.metaFields[e.id].translatedData||[],[e.provider]:e.text}}}};case Mt:return{...t,blockRules:e.data};case Bt:const a={};return e.sourceStringCount&&(a.sourceStringCount=e.sourceStringCount),e.sourceWordCount&&(a.sourceWordCount=e.sourceWordCount),e.sourceCharacterCount&&(a.sourceCharacterCount=e.sourceCharacterCount),(e.targetWordCount||e.targetCharacterCount||e.translateStatus||e.timeTaken)&&e.provider&&(a.translateData={...t.translationInfo?.translateData||{},[e.provider]:{...t.translationInfo?.translateData?.[e.provider]||{},...e.targetStringCount&&{targetStringCount:e.targetStringCount},...e.targetWordCount&&{targetWordCount:e.targetWordCount},...e.targetCharacterCount&&{targetCharacterCount:e.targetCharacterCount},...e.translateStatus&&{translateStatus:e.translateStatus},...e.timeTaken&&{timeTaken:e.timeTaken}}}),{...t,translationInfo:{...t.translationInfo,...a}};case Ht:return{...t,allowedMetaFields:{...t.allowedMetaFields,[e.id]:{...t.allowedMetaFields[e.id]||[],inputType:e.inputType}}};case Ut:return{...t,contentFetchStatus:e.status};default:return t}},actions:n,selectors:o}));const de=(t,e,a,n)=>{const o=(t,e)=>{Object.keys(e).map(a=>{let o=e;o=o[a];const r=new Array(...t,a);n(r,o)})};Object.getPrototypeOf(e)===Array.prototype?((t,e)=>{const r=new Array(...t);let s=a;r.forEach(t=>{s=s[t]}),[null,void 0].includes(s)||(Object.getPrototypeOf(s)!==Object.prototype?(Object.getPrototypeOf(s)===Array.prototype&&s.forEach((t,a)=>{const o=new Array;r.forEach(t=>{o.push(t)}),o.push(a),n(o,e[0])}),"object"!=typeof s||o(t,e[0])):o(t,e[0]))})(t,e):Object.getPrototypeOf(e)===Object.prototype&&o(t,e)},pe=(t,e)=>{Object.keys(e.AtfpBlockParseRules).includes(t.name)&&((t,e,a)=>{const n=Object.values(a),o=(a,n)=>{if(!0===n){const n=new Array(...a),o=new Array;let r=e,s=t;n.forEach(t=>{o.push(t),s+=`catfp${t}`,r=r?r[t]:r});let c=r;if(c instanceof wp.richText.RichTextData&&(c=c.originalHTML),void 0!==c&&"string"==typeof c&&""!==c.trim()){let t=s.replace(/[^\p{L}\p{N}]/gu,"");if(!/[\p{L}\p{N}]/gu.test(c))return!1;(0,l.dispatch)("block-catfp/translate").contentSaveSource(t,c)}return}de(a,n,e,o)};n.forEach(t=>{Object.keys(t).forEach(e=>{const a=new Array(e);o(a,t[e])})})})(t.clientId,t.attributes,e.AtfpBlockParseRules[t.name])},ue=(t,e)=>{t.forEach(t=>{pe(t,e),t.innerBlocks&&ue(t.innerBlocks,e)})},ge=window.wp.blocks,fe={_yoast_wpseo_title:{type:"string"},_yoast_wpseo_focuskw:{type:"string"},_yoast_wpseo_metadesc:{type:"string"},_yoast_wpseo_bctitle:{type:"string"},"_yoast_wpseo_opengraph-title":{type:"string"},"_yoast_wpseo_opengraph-description":{type:"string"},"_yoast_wpseo_twitter-title":{type:"string"},"_yoast_wpseo_twitter-description":{type:"string"},rank_math_title:{type:"string"},rank_math_description:{type:"string"},rank_math_focus_keyword:{type:"string"},rank_math_facebook_title:{type:"string"},rank_math_facebook_description:{type:"string"},rank_math_twitter_title:{type:"string"},rank_math_twitter_description:{type:"string"},rank_math_breadcrumb_title:{type:"string"},_seopress_titles_title:{type:"string"},_seopress_titles_desc:{type:"string"},_seopress_social_fb_title:{type:"string"},_seopress_social_fb_desc:{type:"string"},_seopress_social_twitter_title:{type:"string"},_seopress_social_twitter_desc:{type:"string"},_seopress_analysis_target_kw:{type:"string"}},me=async t=>{const e=catfp_global_object.ajax_url;let a=wp.data.select("block-catfp/translate").getBlockRules()||{};const n=[];t.updateDestroyHandler(()=>{n.forEach(t=>{t.abort("Modal Closed")})});const o=t=>{(0,l.dispatch)("block-catfp/translate").allowedMetaFields(t)};Object.keys(fe).forEach(t=>{o({id:t,type:fe[t].type})}),(()=>{const t="true"===catfp_global_object.postMetaSync;if(window.acf&&!t){const t=["text","textarea","wysiwyg"];acf.getFields().forEach(e=>{const a=JSON.parse(JSON.stringify({key:e.data.key,type:e.data.type,name:e.data.name}));let n=!1;if(e.$el&&e.$el.closest(".acf-field.acf-field-repeater")&&e.$el.closest(".acf-field.acf-field-repeater").length>0){const t=e.$el.closest(".acf-row").data("id"),o=e.$el.closest(".acf-field.acf-field-repeater").data("name");if(t&&""!==t){const e=t.replace("row-","");a.name=o+"_"+e+"_"+a.name,n=!0}}if(e.data&&e.data.key&&t.includes(e.data.type)){const t=e.data.name,a=e.data.type;o({id:t,type:a})}})}})(),await(async()=>{if(a&&a.AtfpBlockParseRules&&Object.keys(a.AtfpBlockParseRules).length>0)return;const t={catfp_nonce:catfp_global_object.ajax_nonce,action:catfp_global_object.action_block_rules},o=new AbortController;n.push(o),await fetch(e,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(t),signal:o.signal}).then(t=>t.json()).then(t=>{a=JSON.parse(t.data.blockRules),(0,l.dispatch)("block-catfp/translate").setBlockRules(a)}).catch(t=>{console.error("Error fetching post content:",t)})})(),await(async()=>{if((0,l.select)("block-catfp/translate").contentFetchStatus())return;const o={postId:parseInt(t.postId),local:t.targetLang,current_local:t.sourceLang,catfp_nonce:catfp_global_object.ajax_nonce,action:catfp_global_object.action_fetch},r=new AbortController;n.push(r),await fetch(e,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(o),signal:r.signal}).then(t=>t.json()).then(e=>{if((0,l.select)("block-catfp/translate").contentFetchStatus())return;const n=e.data;n.content&&""!==n.content.trim()&&(n.content=(0,ge.parse)(n.content)),((t,e)=>{const a=(0,l.select)("block-catfp/translate").getAllowedMetaFields();Object.keys(t).forEach(n=>{if("content"===n)((t,e)=>{Object.values(t).forEach(t=>{pe(t,e),t.innerBlocks&&ue(t.innerBlocks,e)})})(t[n],e);else if("metaFields"===n)Object.keys(t[n]).forEach(e=>{Object.keys(a).includes(e)&&"string"===a[e].inputType&&""!==t[n][e][0]&&void 0!==t[n][e][0]&&(0,l.dispatch)("block-catfp/translate").metaFieldsSaveSource(e,t[n][e][0])}),window.acf&&acf.getFields().forEach(t=>{const e=JSON.parse(JSON.stringify({key:t.data.key,type:t.data.type,name:t.data.name}));let n=!1;if(t.$el&&t.$el.closest(".acf-field.acf-field-repeater")&&t.$el.closest(".acf-field.acf-field-repeater").length>0){const a=t.$el.closest(".acf-row").data("id"),o=t.$el.closest(".acf-field.acf-field-repeater").data("name");if(a&&""!==a){const t=a.replace("row-","");e.name=o+"_"+t+"_"+e.name,n=!0}}if(t.data&&t.data.key&&Object.keys(a).includes(e.name)){const e=t.data.name,a=t?.val();(0,l.dispatch)("block-catfp/translate").metaFieldsSaveSource(e,a)}});else if(["title","excerpt"].includes(n)&&t[n]&&""!==t[n].trim()){const e=`${n}SaveSource`;(0,l.dispatch)("block-catfp/translate")[e](t[n])}})})(n,a),t.refPostData(n),t.updatePostDataFetch(!0),(0,l.dispatch)("block-catfp/translate").contentFetchStatus(!0)}).catch(t=>{console.error("Error fetching post content:",t)})})()},he=(t,e,a,n)=>{const{createBlock:o}=wp.blocks,{name:r,attributes:s}=t;let l={...s},c=t,i="";return Object.keys(a.AtfpBlockParseRules).includes(t.name)&&(c=((t,e,a)=>{const{select:n}=wp.data,o=Object.values(e),r=t.attributes,s=t.clientId,l=(e,o)=>{if(!0===o){const o=new Array(...e),l=new Array;let c=r,i=s;o.forEach(t=>{l.push(t),i+=`catfp${t}`,c=c?c[t]:c});let d=c;if(d instanceof wp.richText.RichTextData&&(d=d.originalHTML),void 0!==d&&"string"==typeof d&&""!==d.trim()){let e=i.replace(/[^\p{L}\p{N}]/gu,""),r="";r=/[\p{L}\p{N}]/gu.test(d)?n("block-catfp/translate").getTranslatedString("content",d,e,a):d,t.attributes=((t,e,a)=>{const n={...t};let o=n;for(let t=0;t<e.length-1;t++)Object.getPrototypeOf(o[e[t]])===Array.prototype?o[e[t]]=[...o[e[t]]]:o[e[t]]={...o[e[t]]},o=o[e[t]];return o[e[e.length-1]]instanceof wp.richText.RichTextData?o[e[e.length-1]]=a.replace(/(?<!\\)"|\\"/g,"'"):o[e[e.length-1]]=a,n})(t.attributes,o,r)}return}de(e,o,r,l)};return o.forEach(t=>{Object.keys(t).forEach(e=>{const a=new Array(e);l(a,t[e])})}),t})(t,a.AtfpBlockParseRules[t.name],n),l=c.attributes),i=o(r,l,e),i},ye=(t,e,a)=>{let n=t.innerBlocks.map(t=>{if(t.name)return ye(t,e,a)});return he(t,n,e,a)},_e=t=>{if(!(0,l.dispatch)("yoast-seo/editor"))return;const{updateData:e,setFocusKeyword:a,setBreadcrumbsTitle:n,setFacebookPreviewTitle:o,setFacebookPreviewDescription:r,setTwitterPreviewTitle:s,setTwitterPreviewDescription:c}=(0,l.dispatch)("yoast-seo/editor"),{key:i,value:d}=t;switch(i){case"_yoast_wpseo_focuskw":a&&a(d);break;case"_yoast_wpseo_title":e&&e({title:d});break;case"_yoast_wpseo_metadesc":e&&e({description:d});break;case"_yoast_wpseo_bctitle":n&&n(d);break;case"_yoast_wpseo_opengraph-title":o&&o(d);break;case"_yoast_wpseo_opengraph-description":r&&r(d);break;case"_yoast_wpseo_twitter-title":s&&s(d);break;case"_yoast_wpseo_twitter-description":c&&c(d)}},be=t=>{if(!(0,l.dispatch)("rank-math"))return;const{updateKeywords:e,updateTitle:a,updateDescription:n,updateBreadcrumbTitle:o,updateFacebookTitle:r,updateFacebookDescription:s,updateTwitterTitle:c,updateTwitterDescription:i}=(0,l.dispatch)("rank-math"),{key:d,value:p}=t;switch(d){case"rank_math_focus_keyword":e&&e(p);break;case"rank_math_title":a&&a(p);break;case"rank_math_description":n&&n(p);break;case"rank_math_breadcrumb_title":o&&o(p);break;case"rank_math_facebook_title":r&&r(p);break;case"rank_math_facebook_description":s&&s(p);break;case"rank_math_twitter_title":c&&c(p);break;case"rank_math_twitter_description":i&&i(p)}},we=t=>{const{editPost:e}=(0,l.dispatch)("core/editor"),{modalClose:a,postContent:n,service:o}=t;(()=>{const t={};Object.keys(n).filter(t=>["title","excerpt"].includes(t)).forEach(e=>{const a=n[e];if(""!==a.trim()){const n=(0,l.select)("block-catfp/translate").getTranslatedString(e,a,null,o);t[e]=n}}),e(t)})(),(()=>{const t=n.metaFields,e=(0,l.select)("block-catfp/translate").getAllowedMetaFields();!t||Object.keys(t).length<1||window.acf&&acf.getFields().forEach(a=>{const n=JSON.parse(JSON.stringify({key:a.data.key,type:a.data.type,name:a.data.name}));let r=!1;if(a.$el&&a.$el.closest(".acf-field.acf-field-repeater")&&a.$el.closest(".acf-field.acf-field-repeater").length>0){const t=a.$el.closest(".acf-row").data("id"),e=a.$el.closest(".acf-field.acf-field-repeater").data("name");if(t&&""!==t){const a=t.replace("row-","");n.name=e+"_"+a+"_"+n.name,r=!0}}if(a.data&&a.data.key&&Object.keys(e).includes(n.name)){const e=a.data.name,r=a.data.type,s=t[e]&&t[e][0]?t[e][0]:a?.val(),c=(0,l.select)("block-catfp/translate").getTranslatedString("metaFields",s,n.name,o);if(!c||""===c)return;if("wysiwyg"===r&&window.tinymce){const t=a.data.id;tinymce.get(t)?.setContent(c)}else a.val(c)}})})(),(()=>{const t=(0,l.select)("block-catfp/translate").getAllowedMetaFields(),e=n.metaFields;!e||Object.keys(e).length<1||window.acf&&acf.getFields().forEach(a=>{const n=JSON.parse(JSON.stringify({key:a.data.key,type:a.data.type,name:a.data.name}));let r=!1;if(a.$el&&a.$el.closest(".acf-field.acf-field-repeater")&&a.$el.closest(".acf-field.acf-field-repeater").length>0){const t=a.$el.closest(".acf-row").data("id"),e=a.$el.closest(".acf-field.acf-field-repeater").data("name");if(t&&""!==t){const a=t.replace("row-","");n.name=e+"_"+a+"_"+n.name,r=!0}}if(a.data&&a.data.key&&Object.keys(t).includes(n.name)){const t=a.data.name,r=a.data.type,s=e[t]&&e[t][0]?e[t][0]:a?.val(),c=(0,l.select)("block-catfp/translate").getTranslatedString("metaFields",s,n.name,o);if(!c||""===c)return;if("wysiwyg"===r&&window.tinymce){const t=a.data.id;tinymce.get(t)?.setContent(c)}else a.val(c)}})})(),(()=>{const t=n.content;t.length<=0||Object.values(t).forEach(t=>{((t,e)=>{const{select:a}=wp.data,n=a("block-catfp/translate").getBlockRules(),{dispatch:o}=wp.data,{name:r}=t;if(r){let a=t.innerBlocks.map(t=>{if(t.name)return ye(t,n,e)});const r=he(t,a,n,e);o("core/block-editor").insertBlock(r)}})(t,o)})})(),a()},Te=async t=>{const e=catfp_global_object.ajax_url,a=[];t.updateDestroyHandler(()=>{a.forEach(t=>{t.abort("Modal Closed")})});const n=t=>{(0,l.dispatch)("block-catfp/translate").allowedMetaFields(t)};Object.keys(fe).forEach(t=>{n({id:t,type:fe[t].type})}),(()=>{const t="true"===catfp_global_object.postMetaSync;if(window.acf&&!t){const t=["text","textarea","wysiwyg"];acf.getFields().forEach(e=>{const a=JSON.parse(JSON.stringify({key:e.data.key,type:e.data.type,name:e.data.name}));let o=!1;if(e.$el&&e.$el.closest(".acf-field.acf-field-repeater")&&e.$el.closest(".acf-field.acf-field-repeater").length>0){const t=e.$el.closest(".acf-row").data("id"),n=e.$el.closest(".acf-field.acf-field-repeater").data("name");if(t&&""!==t){const e=t.replace("row-","");a.name=n+"_"+e+"_"+a.name,o=!0}}if(e.data&&e.data.key&&t.includes(e.data.type)){const t=e.data.name,a=e.data.type;n({id:t,type:a})}})}})(),await(async()=>{if((0,l.select)("block-catfp/translate").contentFetchStatus())return;const n={postId:parseInt(t.postId),local:t.targetLang,current_local:t.sourceLang,catfp_nonce:catfp_global_object.ajax_nonce,action:catfp_global_object.action_fetch},o=new AbortController;a.push(o),await fetch(e,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(n),signal:o.signal}).then(t=>t.json()).then(e=>{if((0,l.select)("block-catfp/translate").contentFetchStatus())return;const a=e.data;(t=>{const e=(0,l.select)("block-catfp/translate").getAllowedMetaFields();Object.keys(t).forEach(a=>{if("content"===a)(function(t){const e=[],a=/(\r\n|\r|\n)/g;let n,o=0;for(;null!==(n=a.exec(t));){n.index>o&&e.push(t.slice(o,n.index));const r=n[0];e.push(`catfp_skip_${r}_catfp`),o=a.lastIndex}return o<t.length&&e.push(t.slice(o)),e})(t[a]).forEach((t,e)=>{const a=/^&[a-zA-Z0-9#]+;$/.test(t),n=/^<\/?\s*[a-zA-Z0-9#]+\s*\/?>$/.test(t),o=/^<\s*\/?\s*[a-zA-Z0-9#]+\s*><\/\s*\/?\s*[a-zA-Z0-9#]+\s*>$/.test(t),r=/<!--[\s\S]*?-->/g.test(t)&&t.indexOf("\x3c!--")<t.indexOf("--\x3e"),s=!(a||n||o||r);""!==t&&!t.includes("catfp_skip_")&&s&&(0,l.dispatch)("block-catfp/translate").contentSaveSource("classic_index_"+e,t)});else if("metaFields"===a)Object.keys(t[a]).forEach(n=>{Object.keys(e).includes(n)&&"string"===e[n].inputType&&""!==t[a][n][0]&&void 0!==t[a][n][0]&&(0,l.dispatch)("block-catfp/translate").metaFieldsSaveSource(n,t[a][n][0])}),window.acf&&acf.getFields().forEach(t=>{const a=JSON.parse(JSON.stringify({key:t.data.key,type:t.data.type,name:t.data.name}));let n=!1;if(t.$el&&t.$el.closest(".acf-field.acf-field-repeater")&&t.$el.closest(".acf-field.acf-field-repeater").length>0){const e=t.$el.closest(".acf-row").data("id"),o=t.$el.closest(".acf-field.acf-field-repeater").data("name");if(e&&""!==e){const t=e.replace("row-","");a.name=o+"_"+t+"_"+a.name,n=!0}}if(t.data&&t.data.key&&Object.keys(e).includes(a.name)){const e=t.data.name,a=t?.val();(0,l.dispatch)("block-catfp/translate").metaFieldsSaveSource(e,a)}});else if(["title","excerpt"].includes(a)&&t[a]&&""!==t[a].trim()){const e=`${a}SaveSource`;(0,l.dispatch)("block-catfp/translate")[e](t[a])}})})(a),t.refPostData(a),t.updatePostDataFetch(!0),(0,l.dispatch)("block-catfp/translate").contentFetchStatus(!0)}).catch(t=>{console.error("Error fetching post content:",t)})})()},Ee=t=>{const{modalClose:e,postContent:a,service:n}=t,o=(0,l.select)("block-catfp/translate").getAllowedMetaFields();(()=>{if("slug_translate"===catfp_global_object.slug_translation_option||"slug_keep"===catfp_global_object.slug_translation_option){let t="";"slug_translate"===catfp_global_object.slug_translation_option&&(t=(0,l.select)("block-catfp/translate").getTranslatedString("slug",a.slug_name,null,n));const e=document.querySelector("#slugdiv"),o=e?.querySelector('input#post_name[name="post_name"]'),r=e?.querySelector("label");o&&(o.value=t),r&&r.classList.add("screen-reader-text")}if(a.title&&""!==a.title.trim()){const t=(0,l.select)("block-catfp/translate").getTranslatedString("title",a.title,null,n),e=document.querySelector("#titlediv"),o=e?.querySelector('input#title[name="post_title"]'),r=e?.querySelector("label");o&&(o.value=t),r&&r.classList.add("screen-reader-text")}if(a.excerpt&&""!==a.excerpt.trim()){const t=(0,l.select)("block-catfp/translate").getTranslatedString("excerpt",a.excerpt,null,n),e=document.querySelector("#postexcerpt.postbox textarea#excerpt");if(e&&(e.value=t),"product"==catfp_global_object.post_type&&window.tinymce){const e=tinymce.get("excerpt");e&&e.setContent(t)}}})(),"false"===catfp_global_object.postMetaSync&&((()=>{const t=a.metaFields;if(!t)return;const e=(0,l.select)("block-catfp/translate").getAllowedMetaFields();Object.keys(t).forEach(a=>{if(Object.keys(e).includes(a)){const o=(0,l.select)("block-catfp/translate").getTranslatedString("metaFields",t[a],a,n);a.startsWith("_yoast_wpseo_")&&"string"===e[a].inputType?_e({key:a,value:o}):a.startsWith("rank_math_")&&"string"===e[a].inputType?be({key:a,value:o}):a.startsWith("_seopress_")&&"string"===e[a].inputType&&(async t=>{const{key:e,value:a}=t,n=e.replace(/^_/,"")+"_meta";if(document.querySelector("#"+n))switch(e){case"_seopress_titles_title":case"_seopress_titles_desc":case"_seopress_social_fb_title":case"_seopress_social_fb_desc":case"_seopress_social_twitter_title":case"_seopress_social_twitter_desc":jQuery(`#${n}`).val(a),jQuery(`#${n}`).trigger("change");break;case"_seopress_analysis_target_kw":window.target_kw&&window.target_kw instanceof window.Tagify&&window.target_kw.DOM.originalInput.id===n?window.target_kw.addTags(a):(jQuery("#"+n).val(a),jQuery("#"+n).trigger("change"))}})({key:a,value:o})}})})(),(()=>{const t=a.metaFields;window.acf&&acf.getFields().forEach(e=>{const a=JSON.parse(JSON.stringify({key:e.data.key,type:e.data.type,name:e.data.name}));let r=!1;if(e.$el&&e.$el.closest(".acf-field.acf-field-repeater")&&e.$el.closest(".acf-field.acf-field-repeater").length>0){const t=e.$el.closest(".acf-row").data("id"),n=e.$el.closest(".acf-field.acf-field-repeater").data("name");if(t&&""!==t){const e=t.replace("row-","");a.name=n+"_"+e+"_"+a.name,r=!0}}if(e.data&&e.data.key&&Object.keys(o).includes(a.name)){const o=e.data.name,r=e.data.type,s=t[o]&&t[o][0]?t[o][0]:e?.val(),c=(0,l.select)("block-catfp/translate").getTranslatedString("metaFields",s,a.name,n);if(!c||""===c)return;if("wysiwyg"===r&&window.tinymce){const t=e.data.id;tinymce.get(t)?.setContent(c)}else e.val(c)}})})(),(()=>{const t=document.querySelector("#postcustomstuff"),e=t?.querySelectorAll('tbody#the-list td.left input[type="text"][value]');e&&e.length>0&&Array.from(e).forEach(t=>{const e=t?.value;if(e&&""!==e&&Object.keys(o).includes(e)){let a=t?.closest("tr").id;if(a=a.replace("meta-",""),a&&""!==a){const t=document.querySelector(`#meta-${a}-value[name="meta[${a}][value]"]`);if(t&&t.value){const a=(0,l.select)("block-catfp/translate").getTranslatedString("metaFields",t.value,e,n);a&&""!==a&&(t.value=a)}}}})})()),(()=>{const t=function(t){const e=[],a=/(\r\n|\r|\n)/g;let n,o=0;for(;null!==(n=a.exec(t));){n.index>o&&e.push(t.slice(o,n.index));const r=n[0];e.push(`catfp_skip_${r}_catfp`),o=a.lastIndex}return o<t.length&&e.push(t.slice(o)),e}(a.content),e=[];t.forEach((t,a)=>{const o=/^&[a-zA-Z0-9#]+;$/.test(t),r=/^<\/?\s*[a-zA-Z0-9#]+\s*\/?>$/.test(t),s=/^<\s*\/?\s*[a-zA-Z0-9#]+\s*><\/\s*\/?\s*[a-zA-Z0-9#]+\s*>$/.test(t),c=/<!--[\s\S]*?-->/g.test(t)&&t.indexOf("\x3c!--")<t.indexOf("--\x3e"),i=!(o||r||s||c);if(""!==t&&!t.includes("catfp_skip_")&&i){const o="classic_index_"+a,r=(0,l.select)("block-catfp/translate").getTranslatedString("content",t,o,n);e.push(r)}else if(t.includes("catfp_skip_")){const a=t.replace("catfp_skip_","").replace("_catfp","");e.push(a)}else e.push(t)});const o=e.join(""),r=document.querySelector("#wp-content-wrap .wp-editor-tabs");if(r){const t=r?.querySelector(".wp-switch-editor.switch-html"),e=r?.querySelector(".wp-switch-editor.switch-tmce");if(t){t.click();const a=document.querySelector("textarea#content");if(a&&(a.value=o),e)return void e.click()}if(e&&window.tinymce)return e.click(),void tinymce.get("content")?.setContent(o)}window.tinymce&&tinymce.get("content")&&tinymce.get("content")?.setContent(o)})(),setTimeout(()=>{e()},500),"false"===catfp_global_object.postMetaSync&&((t,e)=>{const a=(0,l.select)("block-catfp/translate").getAllowedMetaFields(),n=t,o=(t,e,a)=>{[`[data-depend-id="${t}"]`,`[name="${t}"]`,`[id="${t}"]`].forEach(t=>{document.querySelectorAll(t+':not([type="button"]):not([type="checkbox"]):not([type="radio"])').forEach(t=>{if(t){if(t.value===a)return void(t.value=e);t.querySelectorAll('input:not([type="button"])').forEach(t=>{t.value!==a||(t.value=e)}),t.querySelectorAll("textarea").forEach(t=>{t.value!==a||(t.value=e)})}})})},r=(t,a)=>{Object.keys(a).forEach(s=>{const c=[...t,s],i=c.join("_catfp_");if("string"==typeof a[s]){const t=(0,l.select)("block-catfp/translate").getTranslatedString("metaFields",a[s],i,e);let r=n;t&&""!==t&&c.forEach((e,n)=>{if(n===c.length-1)return o(c.join("_"),t,a[e]),o(e,t,a[e]),void(r[e]=t);r.hasOwnProperty(e)||(r[e]={}),r=r[e]})}"object"==typeof a[s]&&Object.keys(a[s]).length>0&&(n[i]=r(c,a[s]))})};t&&Object.keys(t).length>0&&Object.keys(t).forEach(s=>{if("object"==typeof t[s]&&Object.keys(t[s]).length>0)r([s],t[s]);else if("string"==typeof t[s]&&a[s]&&a[s].status){const a=t[s],r=(0,l.select)("block-catfp/translate").getTranslatedString("metaFields",a,s,e);r&&""!==r&&(o(s,r,a),n[s]=r)}})})(a.metaFields,n),(()=>{const t=window.catfp_global_object.ajax_url,e=window.catfp_global_object.current_post_id,a=window.catfp_global_object.classic_status_key,n=window.catfp_global_object.action_update_status;fetch(t,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams({action:n,post_id:e,status:"completed",catfp_update_translation_nonce:a})}).then(t=>t.json()).then().catch(t=>{console.error("Error:",t)})})()},Se=t=>{const e=()=>{const t=document.querySelector(".catfp-body-notice-wrapper");if(t){const e=t.offsetHeight+t.offsetTop;t.closest(".modal-body").style.setProperty("--catfp-notice-wrapper-height",`${e}px`)}};return(0,d.useEffect)(()=>(t.lastNotice&&(e(),window.addEventListener("resize",e)),()=>{window.removeEventListener("resize",e)}),[t.lastNotice]),React.createElement("div",{className:t.className},t.children)},ve=async t=>{const e={widgetsContent:catfp_global_object.elementorData&&"string"==typeof catfp_global_object.elementorData?JSON.parse(catfp_global_object.elementorData):catfp_global_object.elementorData,metaFields:catfp_global_object?.metaFields||{}};catfp_global_object.parent_post_title&&""!==catfp_global_object.parent_post_title&&(e.title=catfp_global_object.parent_post_title),Object.keys(fe).forEach(t=>{var e;e={id:t,type:fe[t].type},(0,l.dispatch)("block-catfp/translate").allowedMetaFields(e)}),(t=>{const e=(0,l.select)("block-catfp/translate").getAllowedMetaFields(),a=(t,e,n)=>{t(e[n],n),++n<e.length&&a(t,e,n)},n=(t,e)=>{if("string"==typeof e&&""!==e.trim()&&t.length>0){const a=t.join("_catfp_");e&&""!==e&&(0,l.dispatch)("block-catfp/translate").contentSaveSource(a,e)}},o=t=>["title","description","editor","text","content","label"].some(e=>t.toLowerCase().includes(e))||["caption","heading","sub_heading","testimonial_content","testimonial_job","testimonial_name","name"].some(e=>t===e),r=["content_width","title_size","font_size","margin","padding","background","border","color","text_align","font_weight","font_family","line_height","letter_spacing","text_transform","border_radius","box_shadow","opacity","width","height","display","position","z_index","visibility","align","max_width","content_typography_typography","flex_justify_content","title_color","description_color","email_content"],s=(t,e,l=[])=>{const c=t.settings;if(l.push(e),"object"==typeof c&&null!==c&&Object.keys(c).length>0){const t=(t,e)=>{if(!r.some(e=>t.toLowerCase().includes(e))&&(o(t)&&"string"==typeof c[t]&&""!==c[t].trim()&&n([...l,"settings",t],c[t]),Array.isArray(c[t])&&c[t].length>0)){const e=(e,s)=>{"object"==typeof e&&null!==e&&a(a=>{r.includes(a.toLowerCase())||o(a)&&"string"==typeof e[a]&&""!==e[a].trim()&&n([...l,"settings",t,s,a],e[a])},Object.keys(e),0)};a(e,c[t],0)}};a(t,Object.keys(c),0)}if(t.elements&&Array.isArray(t.elements)&&t.elements.length>0){const e=(t,e)=>{s(t,e,[...l,"elements"])};a(e,t.elements,0)}};if(t.widgetsContent&&t.widgetsContent.length>0&&a((t,e)=>{s(t,e,[])},t.widgetsContent,0),t.title&&""!==t.title){const e=catfp_global_object.current_post_id;if(e){const a=elementor?.settings?.page?.model?.get("post_title");a&&""!==a&&a===`Elementor #${e}`&&(0,l.dispatch)("block-catfp/translate").titleSaveSource(t.title)}}var c;c=t.metaFields,Object.keys(c).forEach(t=>{Object.keys(e).includes(t)&&"string"===e[t].inputType&&""!==c[t][0]&&void 0!==c[t][0]&&(0,l.dispatch)("block-catfp/translate").metaFieldsSaveSource(t,c[t][0])})})(e),t.refPostData(e),t.updatePostDataFetch(!0)},ke=(t,e)=>{for(const a of t){if(a.get("id")===e)return a;const t=a.get("elements").models,n=ke(t,e);if(n)return n}return null},Re=({postContent:t,modalClose:e,service:a})=>{const n=elementor.config.document.id,o=[],r=["content_width","title_size","font_size","margin","padding","background","border","color","text_align","font_weight","font_family","line_height","letter_spacing","text_transform","border_radius","box_shadow","opacity","width","height","display","position","z_index","visibility","align","max_width","content_typography_typography","flex_justify_content","title_color","description_color","email_content"],s=t=>["title","description","editor","text","content","label"].some(e=>t.toLowerCase().includes(e))||["caption","heading","sub_heading","testimonial_content","testimonial_job","testimonial_name","name"].some(e=>t===e),c=(t,e,n=[])=>{const i=t.id,d=t.settings;n.push(e),"object"==typeof d&&null!==d&&Object.keys(d).forEach(t=>{if(!r.some(e=>t.toLowerCase().includes(e))){if(s(t)&&"string"==typeof d[t]&&""!==d[t].trim()){const e=n.join("_catfp_")+"_catfp_settings_catfp_"+t,r=(0,l.select)("block-catfp/translate").getTranslatedString("content",d[t],e,a);o.push({ID:i,key:t,translatedContent:r})}Array.isArray(d[t])&&d[t].forEach((e,c)=>{"object"==typeof e&&null!==e&&Object.keys(e).forEach(d=>{if(!r.includes(d.toLowerCase())&&s(d)&&"string"==typeof e[d]&&""!==e[d].trim()){const r=`${t}[${c}].${d}`,s=n.join("_catfp_")+"_catfp_settings_catfp_"+t+"_catfp_"+c+"_catfp_"+d,p=(0,l.select)("block-catfp/translate").getTranslatedString("content",e[d],s,a);o.push({ID:i,key:r,translatedContent:p})}})})}}),t.elements&&Array.isArray(t.elements)&&t.elements.forEach((t,e)=>{c(t,e,[...n,"elements"])})};t.widgetsContent.map((t,e)=>c(t,e,[])),(t=>{t.forEach(t=>{const e=ke(elementor.elements.models,t.ID);if(e){const a=e.get("settings");a.get(t.key)&&(a.set(t.key,t.translatedContent),e?.renderRemoteServer());const n=t.key.match(/(.+)\[(\d+)\]\.(.+)/);if(n){const[o,r,s,l]=n,c=a.get(r);Array.isArray(c.models)&&c.models[s]&&(c.models[s].attributes[l]=t.translatedContent,a.set(r,c),e?.renderRemoteServer())}}}),$e.internal("document/save/set-is-modified",{status:!0})})(o),((t,e)=>{const a=(0,l.select)("block-catfp/translate").getAllowedMetaFields();!t&&Object.keys(t).length<1||Object.keys(t).forEach(n=>{if(Object.keys(a).includes(n)){const o=(0,l.select)("block-catfp/translate").getTranslatedString("metaFields",t[n][0],n,e);n.startsWith("_yoast_wpseo_")&&"string"===a[n].inputType?_e({key:n,value:o}):n.startsWith("rank_math_")&&"string"===a[n].inputType?be({key:n,value:o}):n.startsWith("_seopress_")&&"string"===a[n].inputType&&elementor?.settings?.page?.model?.setExternalChange(n,o)}})})(t.metaFields,a),((t,e)=>{if(t&&""!==t){const a=(0,l.select)("block-catfp/translate").getTranslatedString("title",t,null,e);a&&""!==a&&elementor?.settings?.page?.model?.setExternalChange("post_title",a)}})(t.title,a);const i=(()=>{const t=catfp_global_object.elementorData;return wp.data.select("block-catfp/translate").getTranslationEntry().forEach(e=>{const n=e.source,o=e.id,r=e.translatedData,s=e.type;if(!n||""===n||"content"!==s)return;const l=o.split("_catfp_"),c=r[a];let i=null,d=null,p=t;l.forEach(t=>{i=p,d=t,p=p?p[t]:null}),i&&d&&i[d]&&i[d]===n&&(i[d]=c)}),t})(),d={action:catfp_global_object.update_elementor_data,post_id:n,elementor_data:JSON.stringify(i),catfp_nonce:catfp_global_object.ajax_nonce};fetch(catfp_global_object.ajax_url,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(d)}).then(t=>t.json()).then(t=>{if(t.success){const t=document.querySelector('.catfp-translate-button[name="catfp_meta_box_translate"]');t&&t.setAttribute("title","Translation process completed successfully.")}else console.error("Failed to update Elementor data:",t.data);e()}).catch(t=>{e(),console.error("Error updating Elementor data:",t)})},Ce=window.catfp_global_object.editor_type,xe=()=>{let t=new Array;t.push('\x3c!-- The Modal --\x3e<div id="catfp-setting-modal"></div>','<div id="catfp_strings_model" class="modal catfp_custom_model"></div>'),t.forEach(t=>{document.body.insertAdjacentHTML("beforeend",t)})},Ae=()=>{const t=[];if("gutenberg"===Ce){"true"===catfp_global_object.postMetaSync&&t.push({className:"catfp-notice catfp-notice-error",message:React.createElement("p",null,(0,c.__)("For accurate custom field translations, please disable the Custom Fields synchronization in ","chrome-ai-translation-for-polylang"),React.createElement("a",{href:`${catfp_global_object.admin_url}admin.php?page=mlang_settings`,target:"_blank",rel:"noopener noreferrer"},(0,c.__)("Polylang settings","chrome-ai-translation-for-polylang")),(0,c.__)(". This may affect linked posts or pages.","chrome-ai-translation-for-polylang"))});const e=(0,l.select)("block-catfp/translate").getBlockRules();e.AtfpBlockParseRules&&0!==Object.keys(e.AtfpBlockParseRules).length||t.push({className:"catfp-notice catfp-notice-error",message:React.createElement("p",null,(0,c.__)("No block rules were found. It appears that the block-rules.JSON file could not be fetched, possibly because it is blocked by your server settings. Please check your server configuration to resolve this issue.","chrome-ai-translation-for-polylang"))})}const e=t.length;if(t.length>0)return t.map((t,a)=>React.createElement(Se,{className:t.className,key:a,lastNotice:a===e-1},t.message))},Le=()=>{const[t,e]=(0,d.useState)(!1),a=window.catfp_global_object.target_lang,n=window.catfp_global_object.parent_post_id,o=window.catfp_global_object.current_post_id,r=window.catfp_global_object.post_type;let s,l,i;const p=window.catfp_global_object.source_lang;"elementor"===Ce?(i='button.catfp-translate-button[name="catfp_meta_box_translate"]',s=Re,l=ve):"gutenberg"===Ce?(i='input#catfp-translate-button[name="catfp_meta_box_translate"]',s=we,l=me):"classic"===Ce&&(i="button#catfp-classic-editor-translate-button",s=Ee,l=Te);const[u,g]=(0,d.useState)(!1),[f,m]=(0,d.useState)(!0);if((0,d.useEffect)(()=>{if(t){const t=document.querySelector(i);t&&(t.disabled=!0,t.value=(0,c.__)("Already Translated","chrome-ai-translation-for-polylang"))}},[t]),!p||""===p){const t=document.querySelector(i);return void(t&&(t.title=`Parent ${window.catfp_global_object.post_type} may be deleted.`,t.disabled=!0))}return React.createElement(React.Fragment,null,!t&&p&&""!==p&&React.createElement(Lt,{contentLoading:f,updatePostDataFetch:t=>{g(t),m(!1)},postDataFetchStatus:u,pageTranslate:t=>{e(t)},postId:n,currentPostId:o,targetLang:a,postType:r,fetchPostData:async t=>{await l(t);const e=wp.data.select("block-catfp/translate").getTranslationEntry();let a=0,n=0,o=0;e.map(t=>{const e=t.source?t.source:"",r=e.split(/(?<=[.!?]+)\s+/).length,s=e.trim().split(/\s+/).filter(t=>/[^\p{L}\p{N}]/.test(t)).length,l=e.length;a+=r,n+=l,o+=s}),wp.data.dispatch("block-catfp/translate").translationInfo({sourceStringCount:a,sourceWordCount:o,sourceCharacterCount:n})},translatePost:s,translateWrpSelector:i,stringModalBodyNotice:Ae}))},Ne=()=>{const t=document.getElementById("catfp-setting-modal"),e=(()=>{const t=window.catfp_global_object.post_type,e=window.catfp_global_object.target_lang,a=catfp_global_object.languageObject[e].name,n=document.createElement("div");return n.id="catfp-modal-open-warning-wrapper",n.innerHTML=`\n    <div class="modal-container" style="display: flex">\n      <div class="modal-content">\n        <p>${(0,c.sprintf)((0,c.__)("Would you like to duplicate your original %s content and have it automatically translated into %s?","chrome-ai-translation-for-polylang"),t,a)}</p>\n        <div>\n          <div data-value="yes">${(0,c.__)("Yes","chrome-ai-translation-for-polylang")}</div>\n          <div data-value="no">${(0,c.__)("No","chrome-ai-translation-for-polylang")}</div>\n        </div>\n      </div>\n    </div>`,n})();document.body.insertBefore(e,t)},Oe=()=>{const t=jQuery(".MuiButtonGroup-root.MuiButtonGroup-contained").parent(),e=jQuery(t).find(".elementor-button.catfp-translate-button");if(t.length>0&&0===e.length){const e=jQuery('<button class="elementor-button catfp-translate-button" name="catfp_meta_box_translate">Translate</button>');let a=!1;const n=window.catfp_global_object.current_post_id,o=window.catfp_global_object.target_lang,s=localStorage.getItem("catfpElementorConfirmBox");if(s&&"string"==typeof s&&""!==s&&(a=JSON.parse(s)),t.prepend(e),$e.internal("document/save/set-is-modified",{status:!0}),!window.catfp_global_object.elementorData||""===window.catfp_global_object.elementorData||window.catfp_global_object.elementorData.length<1||elementor.elements.length<1)return a&&a[n+"_"+o]&&(delete a[n+"_"+o],0===Object.keys(a).length?localStorage.removeItem("catfpElementorConfirmBox"):localStorage.setItem("catfpElementorConfirmBox",JSON.stringify(a))),e.attr("disabled","disabled"),void e.attr("title","Translation is not available because there is no Elementor data.");xe(),r.createRoot(document.getElementById("catfp-setting-modal")).render(React.createElement(Le,null)),a&&a[n+"_"+o]&&setTimeout(()=>{e.click(),delete a[n+"_"+o],0===Object.keys(a).length?localStorage.removeItem("catfpElementorConfirmBox"):localStorage.setItem("catfpElementorConfirmBox",JSON.stringify(a))},100)}};"gutenberg"===Ce&&window.addEventListener("load",()=>{xe();const t=window.catfp_global_object.source_lang;t&&""!==t&&Ne(),r.createRoot(document.getElementById("catfp-setting-modal")).render(React.createElement(Le,null))}),"classic"===Ce&&window.addEventListener("load",()=>{xe();const t=window.catfp_global_object.source_lang;t&&""!==t&&Ne(),r.createRoot(document.getElementById("catfp-setting-modal")).render(React.createElement(Le,null))}),"elementor"===Ce&&jQuery(window).on("elementor:init",function(){elementor.on("document:loaded",Oe)})})();